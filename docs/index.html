<!DOCTYPE html><html class="default" lang="en"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="IE=edge"/><title>guillermo-plaza-practica8</title><meta name="description" content="Documentation for guillermo-plaza-practica8"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="assets/style.css"/><link rel="stylesheet" href="assets/highlight.css"/><script defer src="assets/main.js"></script><script async src="assets/icons.js" id="tsd-icons-script"></script><script async src="assets/search.js" id="tsd-search-script"></script><script async src="assets/navigation.js" id="tsd-nav-script"></script></head><body><script>document.documentElement.dataset.theme = localStorage.getItem("tsd-theme") || "os";document.body.style.display="none";setTimeout(() => app?app.showPage():document.body.style.removeProperty("display"),500)</script><header class="tsd-page-toolbar"><div class="tsd-toolbar-contents container"><div class="table-cell" id="tsd-search" data-base="."><div class="field"><label for="tsd-search-field" class="tsd-widget tsd-toolbar-icon search no-caption"><svg width="16" height="16" viewBox="0 0 16 16" fill="none"><use href="assets/icons.svg#icon-search"></use></svg></label><input type="text" id="tsd-search-field" aria-label="Search"/></div><div class="field"><div id="tsd-toolbar-links"></div></div><ul class="results"><li class="state loading">Preparing search index...</li><li class="state failure">The search index is not available</li></ul><a href="index.html" class="title">guillermo-plaza-practica8</a></div><div class="table-cell" id="tsd-widgets"><a href="#" class="tsd-widget tsd-toolbar-icon menu no-caption" data-toggle="menu" aria-label="Menu"><svg width="16" height="16" viewBox="0 0 16 16" fill="none"><use href="assets/icons.svg#icon-menu"></use></svg></a></div></div></header><div class="container container-main"><div class="col-content"><div class="tsd-page-title"><h2>guillermo-plaza-practica8</h2></div><div class="tsd-panel tsd-typography"><a id="md:practica-9-aplicación-para-coleccionistas-de-cartas-magic" class="tsd-anchor"></a><h1><a href="#md:practica-9-aplicación-para-coleccionistas-de-cartas-magic">Practica 9: Aplicación para coleccionistas de cartas Magic</a></h1><p><strong>Alumno:</strong> <em>Guillermo Plaza Gayán - <a href="mailto:alu0101495354@ull.edu.es">alu0101495354@ull.edu.es</a></em></p>
<p><strong>Fecha:</strong> 12/03/2024</p>
<p><strong>Estudios:</strong> Ingeniería Informática</p>
<p><strong>Asignatura:</strong> Desarrollo en Sistemas Informáticos</p>
<p><strong>Profesor:</strong> Eduardo Manuel Segredo González</p>
<p><a href="https://github.com/ULL-ESIT-INF-DSI-2324/ull-esit-inf-dsi-23-24-prct09-filesystem-magic-app-guilleplz/actions/workflows/coveralls.yml"><img src="https://github.com/ULL-ESIT-INF-DSI-2324/ull-esit-inf-dsi-23-24-prct09-filesystem-magic-app-guilleplz/actions/workflows/coveralls.yml/badge.svg" alt="Coveralls"></a></p>
<p><a href="https://github.com/ULL-ESIT-INF-DSI-2324/ull-esit-inf-dsi-23-24-prct09-filesystem-magic-app-guilleplz/actions/workflows/sonarcloud.yml"><img src="https://github.com/ULL-ESIT-INF-DSI-2324/ull-esit-inf-dsi-23-24-prct09-filesystem-magic-app-guilleplz/actions/workflows/sonarcloud.yml/badge.svg" alt="Sonar-Cloud"></a></p>
<p><a href="https://github.com/ULL-ESIT-INF-DSI-2324/ull-esit-inf-dsi-23-24-prct09-filesystem-magic-app-guilleplz/actions/workflows/node.js.yml"><img src="https://github.com/ULL-ESIT-INF-DSI-2324/ull-esit-inf-dsi-23-24-prct09-filesystem-magic-app-guilleplz/actions/workflows/node.js.yml/badge.svg" alt="tests"></a></p>
<a id="md:indice" class="tsd-anchor"></a><h1><a href="#md:indice">Indice</a></h1><ol>
<li><a href="#md:objetivo">objetivo</a></li>
<li><a href="#md:requisitos-previos">requisitos previos</a></li>
<li><a href="#md:programa-de-cartas-magic">programa</a></li>
<li><a href="#md:conclusión">conclusiones</a></li>
</ol>
<a id="md:objetivo" class="tsd-anchor"></a><h1><a href="#md:objetivo">Objetivo</a></h1><p>En esta practica realizaremos un programa que use el paquete fs de node.js para que multiples usuarios puedan tener una colección de cartas magic independiente e interactuar con ella. Cada usuario tendrá un fichero dentro de un directorio con su nombre y, en el fichero, las cartas en formato json.
Al realizar esta practica aprenderemos los conceptos del paquete fs síncrono, además de familiarizarnos con paquetes como yargs para obtener de manera sencilla argumentos por linea de comandos, o chalk para dar color y formato a la salida por terminal.</p>
<a id="md:requisitos-previos" class="tsd-anchor"></a><h1><a href="#md:requisitos-previos">Requisitos previos</a></h1><p>Para iniciar la practica deberemos primero seguir una serie de pasos:</p>
<a id="md:inicialización-del-repositorio" class="tsd-anchor"></a><h2><a href="#md:inicialización-del-repositorio">Inicialización del repositorio</a></h2><p>Tenemos nuestro repositorio asignado en github classroom. Simplemente tenemos que ejecutar el siguiente comando en nuestra carpeta de practicas en la máquina virtual </p>
<pre><code class="language-bash"><span class="hl-0">git</span><span class="hl-1"> </span><span class="hl-2">clone</span><span class="hl-1"> </span><span class="hl-2">git@github.com:ULL-ESIT-INF-DSI-2324/ull-esit-inf-dsi-23-24-prct09-filesystem-magic-app-guilleplz.git</span>
</code><button>Copy</button></pre>
<p>Con esto ya tendremos el repositorio listo para trabajar.</p>
<a id="md:paquetes-instalados" class="tsd-anchor"></a><h2><a href="#md:paquetes-instalados">Paquetes instalados</a></h2><p>Lo primero que deberemos hacer es iniciar npm: </p>
<pre><code class="language-bash"><span class="hl-0">npm</span><span class="hl-1"> </span><span class="hl-2">init</span><span class="hl-1"> </span><span class="hl-3">--yes</span>
</code><button>Copy</button></pre>
<p>Esto, iniciará node en nuestro repositorio, generando un fichero package.json que tendrá el siguiente formato:</p>
<pre><code class="language-json"><span class="hl-1">{</span><br/><span class="hl-1">  </span><span class="hl-4">&quot;name&quot;</span><span class="hl-1">: </span><span class="hl-2">&quot;theory-examples&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-4">&quot;version&quot;</span><span class="hl-1">: </span><span class="hl-2">&quot;1.0.0&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-4">&quot;description&quot;</span><span class="hl-1">: </span><span class="hl-2">&quot;&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-4">&quot;main&quot;</span><span class="hl-1">: </span><span class="hl-2">&quot;index.js&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-4">&quot;scripts&quot;</span><span class="hl-1">: {</span><br/><span class="hl-1">    </span><span class="hl-4">&quot;test&quot;</span><span class="hl-1">: </span><span class="hl-2">&quot;echo </span><span class="hl-5">\&quot;</span><span class="hl-2">Error: no test specified</span><span class="hl-5">\&quot;</span><span class="hl-2"> &amp;&amp; exit 1&quot;</span><br/><span class="hl-1">  },</span><br/><span class="hl-1">  </span><span class="hl-4">&quot;keywords&quot;</span><span class="hl-1">: [],</span><br/><span class="hl-1">  </span><span class="hl-4">&quot;author&quot;</span><span class="hl-1">: </span><span class="hl-2">&quot;&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-4">&quot;license&quot;</span><span class="hl-1">: </span><span class="hl-2">&quot;ISC&quot;</span><br/><span class="hl-1">}</span>
</code><button>Copy</button></pre>
<p>A continuación, iniciaremos typescript ejecutando el comando <code>tsc --init</code>, lo cual generará un fichero tsconfig.json el cual modificaremos algunas opciones para que quede de la siguiente manera</p>
<pre><code class="language-json"><span class="hl-1">{</span><br/><span class="hl-1">  </span><span class="hl-4">&quot;exclude&quot;</span><span class="hl-1">: [</span><br/><span class="hl-1">    </span><span class="hl-2">&quot;./node_modules&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-2">&quot;./dist&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-2">&quot;./test&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-2">&quot;.nyc_output&quot;</span><br/><span class="hl-1">  ],</span><br/><span class="hl-1">  </span><span class="hl-4">&quot;compilerOptions&quot;</span><span class="hl-1">: {</span><br/><span class="hl-1">    </span><span class="hl-4">&quot;target&quot;</span><span class="hl-1">: </span><span class="hl-2">&quot;es2022&quot;</span><span class="hl-1">,                                  </span><span class="hl-6">/* Set the JavaScript language version for emitted JavaScript and include compatible library declarations. */</span><br/><span class="hl-1">    </span><span class="hl-6">/* Modules */</span><br/><span class="hl-1">    </span><span class="hl-4">&quot;module&quot;</span><span class="hl-1">: </span><span class="hl-2">&quot;node16&quot;</span><span class="hl-1">,                                </span><span class="hl-6">/* Specify what module code is generated. */</span><br/><span class="hl-1">    </span><span class="hl-4">&quot;rootDir&quot;</span><span class="hl-1">: </span><span class="hl-2">&quot;./src&quot;</span><span class="hl-1">,                                  </span><span class="hl-6">/* Specify the root folder within your source files. */</span><br/><span class="hl-1">    </span><span class="hl-4">&quot;outDir&quot;</span><span class="hl-1">: </span><span class="hl-2">&quot;./dist&quot;</span><span class="hl-1">,                                   </span><span class="hl-6">/* Specify an output folder for all emitted files. */</span><br/><span class="hl-1">    </span><span class="hl-4">&quot;esModuleInterop&quot;</span><span class="hl-1">: </span><span class="hl-3">true</span><span class="hl-1">,                             </span><span class="hl-6">/* Emit additional JavaScript to ease support for importing CommonJS modules. This enables &#39;allowSyntheticDefaultImports&#39; for type compatibility. */</span><br/><span class="hl-1">    </span><span class="hl-4">&quot;forceConsistentCasingInFileNames&quot;</span><span class="hl-1">: </span><span class="hl-3">true</span><span class="hl-1">,            </span><span class="hl-6">/* Ensure that casing is correct in imports. */</span><br/><br/><span class="hl-1">    </span><span class="hl-6">/* Type Checking */</span><br/><span class="hl-1">    </span><span class="hl-4">&quot;strict&quot;</span><span class="hl-1">: </span><span class="hl-3">true</span><span class="hl-1">,                                      </span><span class="hl-6">/* Enable all strict type-checking options. */</span><br/><span class="hl-1">    </span><span class="hl-4">&quot;skipLibCheck&quot;</span><span class="hl-1">: </span><span class="hl-3">true</span><span class="hl-1">                                 </span><span class="hl-6">/* Skip type checking all .d.ts files. */</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">}</span><br/>
</code><button>Copy</button></pre>
<p>hemos de fijarnos que hemos puesto la opción module a node16 para poder usar modulos ESM. Además, para esto, deberemos añadir la opción &quot;type&quot;: &quot;module&quot; a nuestro fichero package.json</p>
<p>Una vez hecho esto, deberemos instalar los paquetes necesarios con los giguientes comandos:</p>
<pre><code class="language-bash"><span class="hl-0">eslint</span><span class="hl-1"> </span><span class="hl-3">--init</span><br/><span class="hl-0">npm</span><span class="hl-1"> </span><span class="hl-2">i</span><span class="hl-1"> </span><span class="hl-3">--save-dev</span><span class="hl-1"> </span><span class="hl-2">typedoc</span><br/><span class="hl-0">npm</span><span class="hl-1"> </span><span class="hl-2">i</span><span class="hl-1"> </span><span class="hl-3">--save-dev</span><span class="hl-1"> </span><span class="hl-2">mocha</span><span class="hl-1"> </span><span class="hl-2">chai@4.4.1</span><span class="hl-1"> </span><span class="hl-2">@types/mocha</span><span class="hl-1"> </span><span class="hl-2">@types/chai</span><span class="hl-1"> </span><span class="hl-2">ts-node</span><br/><span class="hl-0">npm</span><span class="hl-1"> </span><span class="hl-2">i</span><span class="hl-1"> </span><span class="hl-3">--save-dev</span><span class="hl-1"> </span><span class="hl-2">chalk</span><span class="hl-1"> </span><span class="hl-2">yargs</span><span class="hl-1"> </span><span class="hl-2">@types/yargs</span><br/><span class="hl-0">npm</span><span class="hl-1"> </span><span class="hl-2">i</span><span class="hl-1"> </span><span class="hl-3">--save-dev</span><span class="hl-1"> </span><span class="hl-2">nyc</span><span class="hl-1"> </span><span class="hl-2">c8</span><br/>
</code><button>Copy</button></pre>
<p>También deberemos cambiar y añadir algunos ficheros:</p>
<p><strong>.mocharc.json</strong></p>
<pre><code class="language-json"><span class="hl-1">{</span><br/><span class="hl-1">  </span><span class="hl-4">&quot;extension&quot;</span><span class="hl-1">: </span><span class="hl-2">&quot;ts&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-4">&quot;spec&quot;</span><span class="hl-1">: </span><span class="hl-2">&quot;test/**/*.spec.ts&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-4">&quot;loader&quot;</span><span class="hl-1">: </span><span class="hl-2">&quot;ts-node/esm&quot;</span><br/><span class="hl-1">}</span>
</code><button>Copy</button></pre>
<p><strong>typedoc.json</strong></p>
<pre><code class="language-json"><span class="hl-1">{</span><br/><span class="hl-1">  </span><span class="hl-4">&quot;entryPoints&quot;</span><span class="hl-1">: [</span><br/><span class="hl-1">    </span><span class="hl-2">&quot;./src/**/*.ts&quot;</span><br/><span class="hl-1">  ],</span><br/><span class="hl-1">  </span><span class="hl-4">&quot;out&quot;</span><span class="hl-1">: </span><span class="hl-2">&quot;./docs&quot;</span><br/><span class="hl-1">}</span>
</code><button>Copy</button></pre>
<p><strong>.eslintrc.json</strong></p>
<pre><code class="language-json"><span class="hl-1">{</span><br/><span class="hl-1">    </span><span class="hl-4">&quot;env&quot;</span><span class="hl-1">: {</span><br/><span class="hl-1">        </span><span class="hl-4">&quot;es2021&quot;</span><span class="hl-1">: </span><span class="hl-3">true</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-4">&quot;node&quot;</span><span class="hl-1">: </span><span class="hl-3">true</span><br/><span class="hl-1">    },</span><br/><span class="hl-1">    </span><span class="hl-4">&quot;extends&quot;</span><span class="hl-1">: [</span><br/><span class="hl-1">        </span><span class="hl-2">&quot;eslint:recommended&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-2">&quot;plugin:@typescript-eslint/recommended&quot;</span><br/><span class="hl-1">    ],</span><br/><span class="hl-1">    </span><span class="hl-4">&quot;parser&quot;</span><span class="hl-1">: </span><span class="hl-2">&quot;@typescript-eslint/parser&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-4">&quot;parserOptions&quot;</span><span class="hl-1">: {</span><br/><span class="hl-1">        </span><span class="hl-4">&quot;ecmaVersion&quot;</span><span class="hl-1">: </span><span class="hl-2">&quot;latest&quot;</span><br/><span class="hl-1">    },</span><br/><span class="hl-1">    </span><span class="hl-4">&quot;plugins&quot;</span><span class="hl-1">: [</span><br/><span class="hl-1">        </span><span class="hl-2">&quot;@typescript-eslint&quot;</span><br/><span class="hl-1">    ],</span><br/><span class="hl-1">    </span><span class="hl-4">&quot;rules&quot;</span><span class="hl-1">: {</span><br/><span class="hl-1">        </span><span class="hl-4">&quot;valid-jsdoc&quot;</span><span class="hl-1">: </span><span class="hl-2">&quot;off&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-4">&quot;require-jsdoc&quot;</span><span class="hl-1">: </span><span class="hl-2">&quot;off&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-4">&quot;no-unused-vars&quot;</span><span class="hl-1">: </span><span class="hl-2">&quot;off&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-4">&quot;@typescript-eslint/no-unused-vars&quot;</span><span class="hl-1">: </span><span class="hl-2">&quot;off&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-4">&quot;@typescript-eslint/no-explicit-any&quot;</span><span class="hl-1">: </span><span class="hl-2">&quot;off&quot;</span><br/><span class="hl-1">    }</span><br/><span class="hl-1">}</span>
</code><button>Copy</button></pre>
<p>De esta forma tendremos los paquetes necesarios para la practica. Una breve explicación de los paquetes nuevos de esta práctica:</p>
<ul>
<li><strong>yargs</strong>: permite recoger argumentos por linea de comandos de manera muy sencilla y rápida</li>
<li><strong>chalk</strong>: permite dar formato a la salida por terminal, podiendo hacer los textos de colores</li>
</ul>
<a id="md:estructura-de-directorios" class="tsd-anchor"></a><h2><a href="#md:estructura-de-directorios">Estructura de directorios</a></h2><p>Para terminar de preparar el repositorio para empezar el programa debemos crear la estructura:</p>
<ul>
<li>carpeta test para los test</li>
<li>carpeta dist para los archivos compilados</li>
<li>carpeta src para los archivos en ts de nuestro programa</li>
<li>carpeta cartas donde se guardarán las colecciones de todos los usuarios</li>
</ul>
<a id="md:actions" class="tsd-anchor"></a><h2><a href="#md:actions">Actions</a></h2><p>Deberemos añadir a nuestro repositorio de github las acciones de los test, coveralls y sonarcloud</p>
<a id="md:tests" class="tsd-anchor"></a><h3><a href="#md:tests">Tests</a></h3><p>debemos añadir la action de node.js y moodificar el fichero para que quede le la siguiente manera:</p>
<pre><code class="language-yml"><span class="hl-6"># This workflow will do a clean installation of node dependencies, cache/restore them, build the source code and run tests across different versions of node</span><br/><span class="hl-6"># For more information see: https://docs.github.com/en/actions/automating-builds-and-tests/building-and-testing-nodejs</span><br/><br/><span class="hl-7">name</span><span class="hl-1">: </span><span class="hl-8">tests</span><br/><br/><span class="hl-3">on</span><span class="hl-1">:</span><br/><span class="hl-1">  </span><span class="hl-7">push</span><span class="hl-1">:</span><br/><span class="hl-1">    </span><span class="hl-7">branches</span><span class="hl-1">: [ </span><span class="hl-2">&quot;main&quot;</span><span class="hl-1"> ]</span><br/><span class="hl-1">  </span><span class="hl-7">pull_request</span><span class="hl-1">:</span><br/><span class="hl-1">    </span><span class="hl-7">branches</span><span class="hl-1">: [ </span><span class="hl-2">&quot;main&quot;</span><span class="hl-1"> ]</span><br/><br/><span class="hl-7">jobs</span><span class="hl-1">:</span><br/><span class="hl-1">  </span><span class="hl-7">build</span><span class="hl-1">:</span><br/><br/><span class="hl-1">    </span><span class="hl-7">runs-on</span><span class="hl-1">: </span><span class="hl-8">ubuntu-latest</span><br/><br/><span class="hl-1">    </span><span class="hl-7">strategy</span><span class="hl-1">:</span><br/><span class="hl-1">      </span><span class="hl-7">matrix</span><span class="hl-1">:</span><br/><span class="hl-1">        </span><span class="hl-7">node-version</span><span class="hl-1">: [</span><span class="hl-8">16.x</span><span class="hl-1">, </span><span class="hl-8">18.x</span><span class="hl-1">, </span><span class="hl-8">19.x</span><span class="hl-1">, </span><span class="hl-8">20.x</span><span class="hl-1">, </span><span class="hl-8">21.x</span><span class="hl-1">]</span><br/><span class="hl-1">        </span><span class="hl-6"># See supported Node.js release schedule at https://nodejs.org/en/about/releases/</span><br/><br/><span class="hl-1">    </span><span class="hl-7">steps</span><span class="hl-1">:</span><br/><span class="hl-1">    - </span><span class="hl-7">uses</span><span class="hl-1">: </span><span class="hl-8">actions/checkout@v4</span><br/><span class="hl-1">    - </span><span class="hl-7">name</span><span class="hl-1">: </span><span class="hl-8">Use Node.js ${{ matrix.node-version }}</span><br/><span class="hl-1">      </span><span class="hl-7">uses</span><span class="hl-1">: </span><span class="hl-8">actions/setup-node@v4</span><br/><span class="hl-1">      </span><span class="hl-7">with</span><span class="hl-1">:</span><br/><span class="hl-1">        </span><span class="hl-7">node-version</span><span class="hl-1">: </span><span class="hl-8">${{ matrix.node-version }}</span><br/><span class="hl-1">        </span><span class="hl-7">cache</span><span class="hl-1">: </span><span class="hl-8">&#39;npm&#39;</span><br/><span class="hl-1">    - </span><span class="hl-7">run</span><span class="hl-1">: </span><span class="hl-8">npm install</span><br/><span class="hl-1">    - </span><span class="hl-7">run</span><span class="hl-1">: </span><span class="hl-8">npm test</span><br/>
</code><button>Copy</button></pre>
<a id="md:coveralls" class="tsd-anchor"></a><h3><a href="#md:coveralls">Coveralls</a></h3><p>Coveralls nos permitirá tener a disposición el cubrimiento de nuestro programa y seguirlo a desde la página de coveralls.
Para llevarlo a cabo, añadimos el fichero coveralls.yml y lo modificamos para que quede de la siguiente manera:</p>
<pre><code class="language-yml"><span class="hl-6"># This workflow will do a clean installation of node dependencies, cache/restore them, build the source code and run tests across different versions of node</span><br/><span class="hl-6"># For more information see: https://docs.github.com/en/actions/automating-builds-and-tests/building-and-testing-nodejs</span><br/><br/><span class="hl-7">name</span><span class="hl-1">: </span><span class="hl-8">Coveralls</span><br/><br/><span class="hl-3">on</span><span class="hl-1">:</span><br/><span class="hl-1">  </span><span class="hl-7">push</span><span class="hl-1">:</span><br/><span class="hl-1">    </span><span class="hl-7">branches</span><span class="hl-1">: [ </span><span class="hl-2">&quot;main&quot;</span><span class="hl-1"> ]</span><br/><span class="hl-1">  </span><span class="hl-7">pull_request</span><span class="hl-1">:</span><br/><span class="hl-1">    </span><span class="hl-7">branches</span><span class="hl-1">: [ </span><span class="hl-2">&quot;main&quot;</span><span class="hl-1"> ]</span><br/><br/><span class="hl-7">jobs</span><span class="hl-1">:</span><br/><span class="hl-1">  </span><span class="hl-7">build</span><span class="hl-1">:</span><br/><br/><span class="hl-1">    </span><span class="hl-7">runs-on</span><span class="hl-1">: </span><span class="hl-8">ubuntu-latest</span><br/><br/><span class="hl-1">    </span><span class="hl-7">steps</span><span class="hl-1">:</span><br/><span class="hl-1">    - </span><span class="hl-7">name</span><span class="hl-1">: </span><span class="hl-8">Cloning repo</span><br/><span class="hl-1">      </span><span class="hl-7">uses</span><span class="hl-1">: </span><span class="hl-8">actions/checkout@v4</span><br/><span class="hl-1">    - </span><span class="hl-7">name</span><span class="hl-1">: </span><span class="hl-8">Use Node.js 21.x</span><br/><span class="hl-1">      </span><span class="hl-7">uses</span><span class="hl-1">: </span><span class="hl-8">actions/setup-node@v4</span><br/><span class="hl-1">      </span><span class="hl-7">with</span><span class="hl-1">:</span><br/><span class="hl-1">        </span><span class="hl-7">node-version</span><span class="hl-1">: </span><span class="hl-8">21.x</span><br/><span class="hl-1">    - </span><span class="hl-7">name</span><span class="hl-1">: </span><span class="hl-8">Installing dependencies</span><br/><span class="hl-1">      </span><span class="hl-7">run</span><span class="hl-1">: </span><span class="hl-8">npm ci</span><br/><span class="hl-1">    - </span><span class="hl-7">name</span><span class="hl-1">: </span><span class="hl-8">Generating coverage information</span><br/><span class="hl-1">      </span><span class="hl-7">run</span><span class="hl-1">: </span><span class="hl-8">npm run coverage</span><br/><span class="hl-1">    - </span><span class="hl-7">name</span><span class="hl-1">: </span><span class="hl-8">Coveralls GitHub Action</span><br/><span class="hl-1">      </span><span class="hl-7">uses</span><span class="hl-1">: </span><span class="hl-8">coverallsapp/github-action@v2.2.3</span><br/><span class="hl-1">      </span><span class="hl-7">with</span><span class="hl-1">:</span><br/><span class="hl-1">        </span><span class="hl-7">github-token</span><span class="hl-1">: </span><span class="hl-8">${{ secrets.GITHUB_TOKEN }}</span>
</code><button>Copy</button></pre>
<p>Debemos tener en cuenta que necesitamos tener el repositorio público para que nos haga el cubrimiento de nuestro programa</p>
<a id="md:sonarcloud" class="tsd-anchor"></a><h3><a href="#md:sonarcloud">Sonarcloud</a></h3><p>SonarCloud nos proporciona la información de si nuestro proyecto pasa las puertas de calidad. Para ponerlo en funcionamiento iremos a la página de SonarCloud y añadiremos nuestro repositorio siguiendo las instrucciones. Nos deberán quedar los siguientes ficheros:</p>
<p><strong>sonarcloud.yml</strong></p>
<pre><code class="language-yml"><span class="hl-7">name</span><span class="hl-1">: </span><span class="hl-8">Sonar-Cloud</span><span class="hl-1"> </span><br/><span class="hl-3">on</span><span class="hl-1">:</span><br/><span class="hl-1">  </span><span class="hl-7">push</span><span class="hl-1">:</span><br/><span class="hl-1">    </span><span class="hl-7">branches</span><span class="hl-1">: [ </span><span class="hl-8">main</span><span class="hl-1"> ]</span><br/><span class="hl-1">  </span><span class="hl-7">pull_request</span><span class="hl-1">:</span><br/><span class="hl-1">    </span><span class="hl-7">branches</span><span class="hl-1">: [ </span><span class="hl-8">main</span><span class="hl-1"> ]</span><br/><span class="hl-7">jobs</span><span class="hl-1">:</span><br/><span class="hl-1">  </span><span class="hl-7">sonarcloud</span><span class="hl-1">:</span><br/><span class="hl-1">    </span><span class="hl-7">name</span><span class="hl-1">: </span><span class="hl-8">SonarCloud</span><br/><span class="hl-1">    </span><span class="hl-7">runs-on</span><span class="hl-1">: </span><span class="hl-8">ubuntu-latest</span><br/><span class="hl-1">    </span><span class="hl-7">steps</span><span class="hl-1">:</span><br/><span class="hl-1">      - </span><span class="hl-7">name</span><span class="hl-1">: </span><span class="hl-8">Cloning repo</span><br/><span class="hl-1">        </span><span class="hl-7">uses</span><span class="hl-1">: </span><span class="hl-8">actions/checkout@v3</span><br/><span class="hl-1">        </span><span class="hl-7">with</span><span class="hl-1">:</span><br/><span class="hl-1">          </span><span class="hl-7">fetch-depth</span><span class="hl-1">: </span><span class="hl-9">0</span><span class="hl-1">  </span><span class="hl-6"># Shallow clones should be disabled for a better relevancy of analysis</span><br/><span class="hl-1">      - </span><span class="hl-7">name</span><span class="hl-1">: </span><span class="hl-8">Using Node.js 19.x</span><br/><span class="hl-1">        </span><span class="hl-7">uses</span><span class="hl-1">: </span><span class="hl-8">actions/setup-node@v3</span><br/><span class="hl-1">        </span><span class="hl-7">with</span><span class="hl-1">:</span><br/><span class="hl-1">          </span><span class="hl-7">node-version</span><span class="hl-1">: </span><span class="hl-8">19.x</span><br/><span class="hl-1">      - </span><span class="hl-7">name</span><span class="hl-1">: </span><span class="hl-8">Installing dependencies</span><br/><span class="hl-1">        </span><span class="hl-7">run</span><span class="hl-1">: </span><span class="hl-8">npm i</span><br/><span class="hl-1">      - </span><span class="hl-7">name</span><span class="hl-1">: </span><span class="hl-8">Generating coverage report</span><br/><span class="hl-1">        </span><span class="hl-7">run</span><span class="hl-1">: </span><span class="hl-8">npm run coverage</span><br/><span class="hl-1">      - </span><span class="hl-7">name</span><span class="hl-1">: </span><span class="hl-8">SonarCloud Scan</span><br/><span class="hl-1">        </span><span class="hl-7">uses</span><span class="hl-1">: </span><span class="hl-8">SonarSource/sonarcloud-github-action@master</span><br/><span class="hl-1">        </span><span class="hl-7">env</span><span class="hl-1">:</span><br/><span class="hl-1">          </span><span class="hl-7">GITHUB_TOKEN</span><span class="hl-1">: </span><span class="hl-8">${{ secrets.GITHUB_TOKEN }}</span><span class="hl-1">  </span><span class="hl-6"># Needed to get PR information, if any</span><br/><span class="hl-1">          </span><span class="hl-7">SONAR_TOKEN</span><span class="hl-1">: </span><span class="hl-8">${{ secrets.SONAR_TOKEN }}</span>
</code><button>Copy</button></pre>
<p><strong>sonar-project.properties</strong></p>
<pre><code class="language-properties"><span class="hl-3">sonar.projectKey</span><span class="hl-1">=ULL-ESIT-INF-DSI-2324_ull-esit-inf-dsi-23-24-prct09-filesystem-magic-app-guilleplz</span><br/><span class="hl-3">sonar.organization</span><span class="hl-1">=ull-esit-inf-dsi-2324</span><br/><br/><span class="hl-6"># This is the name and version displayed in the SonarCloud UI.</span><br/><span class="hl-6">#sonar.projectName=ull-esit-inf-dsi-23-24-prct09-filesystem-magic-app-guilleplz</span><br/><span class="hl-6">#sonar.projectVersion=1.0</span><br/><br/><br/><span class="hl-6"># Path is relative to the sonar-project.properties file. Replace &quot;\&quot; by &quot;/&quot; on Windows.</span><br/><span class="hl-6">#sonar.sources=.</span><br/><br/><span class="hl-6"># Encoding of the source code. Default is default system encoding</span><br/><span class="hl-6">#sonar.sourceEncoding=UTF-8</span>
</code><button>Copy</button></pre>
<p>Hecho esto, ya tendremos nuestro repositorio listo para empezar nuestro programa</p>
<a id="md:programa-de-cartas-magic" class="tsd-anchor"></a><h1><a href="#md:programa-de-cartas-magic">Programa de cartas magic</a></h1><p>El proyecto se organiza en varios archivos TypeScript que contienen clases, interfaces, enums y funciones relacionadas con la gestión de cartas Magic. A continuación, se describe la estructura de archivos del proyecto:</p>
<p>card.ts: Define las enums Color, TimeLine y Rarity, así como los tipos Strength y Carta.</p>
<pre><code class="language-ts"><br/><span class="hl-10">export</span><span class="hl-1"> </span><span class="hl-3">enum</span><span class="hl-1"> </span><span class="hl-11">Color</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-12">blanco</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-12">azul</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-12">negro</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-12">rojo</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-12">verde</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-12">incoloro</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-12">multicolor</span><br/><span class="hl-1">}</span><br/><br/><span class="hl-10">export</span><span class="hl-1"> </span><span class="hl-3">enum</span><span class="hl-1"> </span><span class="hl-11">TimeLine</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-12">tierra</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-12">criatura</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-12">encantamiento</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-12">conjuro</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-12">instantaneo</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-12">artefacto</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-12">planeswalker</span><br/><span class="hl-1">}</span><br/><br/><span class="hl-10">export</span><span class="hl-1"> </span><span class="hl-3">enum</span><span class="hl-1"> </span><span class="hl-11">Rarity</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-12">comun</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-12">infrecuente</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-12">rara</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-12">mitica</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-12">legendaria</span><br/><span class="hl-1">}</span><br/><br/><span class="hl-10">export</span><span class="hl-1"> </span><span class="hl-3">type</span><span class="hl-1"> </span><span class="hl-11">Strength</span><span class="hl-1"> = [</span><span class="hl-11">number</span><span class="hl-1">, </span><span class="hl-11">number</span><span class="hl-1">];</span><br/><br/><span class="hl-10">export</span><span class="hl-1"> </span><span class="hl-3">type</span><span class="hl-1"> </span><span class="hl-11">Carta</span><span class="hl-1"> = {</span><br/><span class="hl-1">  </span><span class="hl-13">ID</span><span class="hl-1">: </span><span class="hl-11">number</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-13">Name</span><span class="hl-1">: </span><span class="hl-11">string</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-13">ManaCost</span><span class="hl-1">: </span><span class="hl-11">number</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-13">Color</span><span class="hl-1">: </span><span class="hl-11">Color</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-13">TimeLine</span><span class="hl-1">: </span><span class="hl-11">TimeLine</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-13">Rarity</span><span class="hl-1">: </span><span class="hl-11">Rarity</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-13">Rules</span><span class="hl-1">: </span><span class="hl-11">string</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-13">Value</span><span class="hl-1">: </span><span class="hl-11">number</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-13">Strength</span><span class="hl-1">: </span><span class="hl-11">Strength</span><span class="hl-1"> | </span><span class="hl-11">undefined</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-13">Loyalty</span><span class="hl-1">: </span><span class="hl-11">number</span><span class="hl-1"> | </span><span class="hl-11">undefined</span><span class="hl-1">;</span><br/><span class="hl-1">};</span>
</code><button>Copy</button></pre>
<p>Lo más importante en este fichero es el tipo carta que contiene toda la información necesaria para representar este objeto. Los atributos strength y loyalty al ser opcionales, cuando no es el tipo de carta indicada se ponen a undefined</p>
<p>cardmanager.ts: Contiene la implementación de la clase CardManager, que se encarga de gestionar las operaciones CRUD (Crear, Leer, Actualizar, Eliminar) sobre las cartas.</p>
<p>La clase CardManager implementa la interfaz Manager que contiene los métodos necesarios para la correcta ejecución del programa</p>
<pre><code class="language-ts"><span class="hl-10">import</span><span class="hl-1"> { </span><span class="hl-13">Carta</span><span class="hl-1">, </span><span class="hl-13">Color</span><span class="hl-1">, </span><span class="hl-13">Rarity</span><span class="hl-1">, </span><span class="hl-13">TimeLine</span><span class="hl-1"> } </span><span class="hl-10">from</span><span class="hl-1"> </span><span class="hl-2">&quot;./card.js&quot;</span><br/><span class="hl-10">import</span><span class="hl-1"> </span><span class="hl-13">chalk</span><span class="hl-1"> </span><span class="hl-10">from</span><span class="hl-1"> </span><span class="hl-2">&quot;chalk&quot;</span><span class="hl-1">;</span><br/><span class="hl-10">import</span><span class="hl-1"> </span><span class="hl-3">*</span><span class="hl-1"> </span><span class="hl-10">as</span><span class="hl-1"> </span><span class="hl-13">Functions</span><span class="hl-1"> </span><span class="hl-10">from</span><span class="hl-1"> </span><span class="hl-2">&#39;./functions.js&#39;</span><br/><span class="hl-10">import</span><span class="hl-1"> { </span><span class="hl-13">argv</span><span class="hl-1"> } </span><span class="hl-10">from</span><span class="hl-1"> </span><span class="hl-2">&quot;process&quot;</span><span class="hl-1">;</span><br/><br/><span class="hl-6">// tipo que define un array de parámetros que pueden ser numéricos o string</span><br/><span class="hl-3">type</span><span class="hl-1"> </span><span class="hl-11">Params</span><span class="hl-1"> = (</span><span class="hl-11">number</span><span class="hl-1"> | </span><span class="hl-11">string</span><span class="hl-1">)[];</span><br/><br/><span class="hl-6">/**</span><br/><span class="hl-6"> * Interfaz que define los métodos que implementará la clase CardManager</span><br/><span class="hl-6"> */</span><br/><span class="hl-3">interface</span><span class="hl-1"> </span><span class="hl-11">Manager</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-0">addCard</span><span class="hl-1">(</span><span class="hl-13">carta</span><span class="hl-1">: </span><span class="hl-11">Carta</span><span class="hl-1">): </span><span class="hl-11">void</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-0">removeCard</span><span class="hl-1">(</span><span class="hl-13">id</span><span class="hl-1">: </span><span class="hl-11">number</span><span class="hl-1">): </span><span class="hl-11">void</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-0">updateCard</span><span class="hl-1">(</span><span class="hl-13">id</span><span class="hl-1">: </span><span class="hl-11">number</span><span class="hl-1">, </span><span class="hl-13">params</span><span class="hl-1">: </span><span class="hl-11">Params</span><span class="hl-1">): </span><span class="hl-11">void</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-0">listCards</span><span class="hl-1">(): </span><span class="hl-11">void</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-0">readSpecificCard</span><span class="hl-1">(</span><span class="hl-13">id</span><span class="hl-1">: </span><span class="hl-11">number</span><span class="hl-1">): </span><span class="hl-11">void</span><span class="hl-1">;</span><br/><span class="hl-1">}</span><br/><br/><br/><span class="hl-10">export</span><span class="hl-1"> </span><span class="hl-3">class</span><span class="hl-1"> </span><span class="hl-11">CardManager</span><span class="hl-1"> </span><span class="hl-3">implements</span><span class="hl-1"> </span><span class="hl-11">Manager</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-6">// atributo cartas --&gt; array de cartas</span><br/><span class="hl-1">  </span><span class="hl-3">private</span><span class="hl-1"> </span><span class="hl-13">cartas</span><span class="hl-1">: </span><span class="hl-11">Carta</span><span class="hl-1">[];</span><br/><br/><span class="hl-1">  </span><span class="hl-6">/**</span><br/><span class="hl-6">   * Constructor de la clase, tiene un array de cartas que se inicia con las cartas en la base de datos</span><br/><span class="hl-6">   * </span><span class="hl-3">@param</span><span class="hl-6"> </span><span class="hl-13">cartasinbd</span><span class="hl-6"> array de cartas sacadas de la base de datos</span><br/><span class="hl-6">   */</span><br/><span class="hl-1">  </span><span class="hl-3">constructor</span><span class="hl-1">(</span><span class="hl-13">cartasinbd</span><span class="hl-1">: </span><span class="hl-11">Carta</span><span class="hl-1">[]) {</span><br/><span class="hl-1">    </span><span class="hl-3">this</span><span class="hl-1">.</span><span class="hl-13">cartas</span><span class="hl-1"> = </span><span class="hl-13">cartasinbd</span><span class="hl-1">;</span><br/><span class="hl-1">  }</span><br/><br/><span class="hl-1">  </span><span class="hl-6">/**</span><br/><span class="hl-6">   * Getter del array de cartas</span><br/><span class="hl-6">   * </span><span class="hl-3">@returns</span><span class="hl-6"> array de cartas</span><br/><span class="hl-6">   */</span><br/><span class="hl-1">  </span><span class="hl-0">GetCards</span><span class="hl-1">(): </span><span class="hl-11">Carta</span><span class="hl-1">[] {</span><br/><span class="hl-1">    </span><span class="hl-10">return</span><span class="hl-1"> </span><span class="hl-3">this</span><span class="hl-1">.</span><span class="hl-13">cartas</span><span class="hl-1">;</span><br/><span class="hl-1">  }</span><br/><br/><span class="hl-1">  </span><span class="hl-6">/**</span><br/><span class="hl-6">   * Método que añade una carta al array de cartas</span><br/><span class="hl-6">   * </span><span class="hl-3">@param</span><span class="hl-6"> </span><span class="hl-13">carta</span><span class="hl-6"> carta a añadir al array</span><br/><span class="hl-6">   */</span><br/><span class="hl-1">  </span><span class="hl-0">addCard</span><span class="hl-1">(</span><span class="hl-13">carta</span><span class="hl-1">: </span><span class="hl-11">Carta</span><span class="hl-1">): </span><span class="hl-11">void</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-10">if</span><span class="hl-1"> (</span><span class="hl-3">this</span><span class="hl-1">.</span><span class="hl-13">cartas</span><span class="hl-1">.</span><span class="hl-0">find</span><span class="hl-1">((</span><span class="hl-13">cardinbd</span><span class="hl-1">: </span><span class="hl-11">Carta</span><span class="hl-1">) </span><span class="hl-3">=&gt;</span><span class="hl-1"> </span><span class="hl-13">cardinbd</span><span class="hl-1">.</span><span class="hl-12">ID</span><span class="hl-1"> === </span><span class="hl-13">carta</span><span class="hl-1">.</span><span class="hl-12">ID</span><span class="hl-1"> )) {</span><br/><span class="hl-1">      </span><span class="hl-10">throw</span><span class="hl-1"> </span><span class="hl-3">new</span><span class="hl-1"> </span><span class="hl-0">Error</span><span class="hl-1">(</span><span class="hl-2">&quot;La carta ya existe en la base de datos.&quot;</span><span class="hl-1">);</span><br/><span class="hl-1">    } </span><span class="hl-10">else</span><span class="hl-1"> {</span><br/><span class="hl-1">      </span><span class="hl-3">this</span><span class="hl-1">.</span><span class="hl-13">cartas</span><span class="hl-1">.</span><span class="hl-0">push</span><span class="hl-1">(</span><span class="hl-13">carta</span><span class="hl-1">)</span><br/><span class="hl-1">    }</span><br/><span class="hl-1">  }</span><br/><br/><span class="hl-1">  </span><span class="hl-6">/**</span><br/><span class="hl-6">   * Método que elimina una carta del array de cartas</span><br/><span class="hl-6">   * </span><span class="hl-3">@param</span><span class="hl-6"> </span><span class="hl-13">id</span><span class="hl-6"> id de la carta a eliminar</span><br/><span class="hl-6">   */</span><br/><span class="hl-1">  </span><span class="hl-0">removeCard</span><span class="hl-1">(</span><span class="hl-13">id</span><span class="hl-1">: </span><span class="hl-11">number</span><span class="hl-1">): </span><span class="hl-11">void</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-3">const</span><span class="hl-1"> </span><span class="hl-12">index</span><span class="hl-1"> = </span><span class="hl-3">this</span><span class="hl-1">.</span><span class="hl-13">cartas</span><span class="hl-1">.</span><span class="hl-0">findIndex</span><span class="hl-1">((</span><span class="hl-13">carta</span><span class="hl-1">) </span><span class="hl-3">=&gt;</span><span class="hl-1"> </span><span class="hl-13">carta</span><span class="hl-1">.</span><span class="hl-12">ID</span><span class="hl-1"> === </span><span class="hl-13">id</span><span class="hl-1">);</span><br/><span class="hl-1">    </span><span class="hl-6">// si la carta no está en el array</span><br/><span class="hl-1">    </span><span class="hl-10">if</span><span class="hl-1"> (</span><span class="hl-13">index</span><span class="hl-1"> == -</span><span class="hl-9">1</span><span class="hl-1">) {</span><br/><span class="hl-1">      </span><span class="hl-10">throw</span><span class="hl-1"> </span><span class="hl-3">new</span><span class="hl-1"> </span><span class="hl-0">Error</span><span class="hl-1">(</span><span class="hl-2">&quot;no se ha encontrado la carta&quot;</span><span class="hl-1">)</span><br/><span class="hl-1">    }</span><br/><br/><span class="hl-1">    </span><span class="hl-3">this</span><span class="hl-1">.</span><span class="hl-13">cartas</span><span class="hl-1">.</span><span class="hl-0">splice</span><span class="hl-1">(</span><span class="hl-13">index</span><span class="hl-1">, </span><span class="hl-9">1</span><span class="hl-1">)</span><br/><span class="hl-1">  }</span><br/><br/><span class="hl-1">  </span><span class="hl-6">/**</span><br/><span class="hl-6">   * Método que lista todas las cartas del array</span><br/><span class="hl-6">   */</span><br/><span class="hl-1">  </span><span class="hl-0">listCards</span><span class="hl-1">(): </span><span class="hl-11">void</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-6">// para cada una de las cartas</span><br/><span class="hl-1">    </span><span class="hl-3">this</span><span class="hl-1">.</span><span class="hl-13">cartas</span><span class="hl-1">.</span><span class="hl-0">forEach</span><span class="hl-1">((</span><span class="hl-13">carta</span><span class="hl-1">, </span><span class="hl-13">index</span><span class="hl-1">) </span><span class="hl-3">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">      </span><span class="hl-13">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-2">&quot;</span><span class="hl-5">\n</span><span class="hl-2">------------------&quot;</span><span class="hl-1"> + </span><span class="hl-13">index</span><span class="hl-1"> + </span><span class="hl-2">&quot;--------------------</span><span class="hl-5">\n</span><span class="hl-2">&quot;</span><span class="hl-1">);</span><br/><span class="hl-1">      </span><span class="hl-3">this</span><span class="hl-1">.</span><span class="hl-0">PrintCardInfo</span><span class="hl-1">(</span><span class="hl-13">carta</span><span class="hl-1">);</span><br/><span class="hl-1">    })</span><br/><span class="hl-1">  }</span><br/><br/><span class="hl-1">  </span><span class="hl-6">/**</span><br/><span class="hl-6">   * Método que muestra la información de una carta</span><br/><span class="hl-6">   * </span><span class="hl-3">@param</span><span class="hl-6"> </span><span class="hl-13">id</span><span class="hl-6"> id de la carta a leer</span><br/><span class="hl-6">   */</span><br/><span class="hl-1">  </span><span class="hl-0">readSpecificCard</span><span class="hl-1">(</span><span class="hl-13">id</span><span class="hl-1">: </span><span class="hl-11">number</span><span class="hl-1">): </span><span class="hl-11">void</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-3">const</span><span class="hl-1"> </span><span class="hl-12">index</span><span class="hl-1"> = </span><span class="hl-3">this</span><span class="hl-1">.</span><span class="hl-13">cartas</span><span class="hl-1">.</span><span class="hl-0">findIndex</span><span class="hl-1">((</span><span class="hl-13">carta</span><span class="hl-1">) </span><span class="hl-3">=&gt;</span><span class="hl-1"> </span><span class="hl-13">carta</span><span class="hl-1">.</span><span class="hl-12">ID</span><span class="hl-1"> === </span><span class="hl-13">id</span><span class="hl-1">);</span><br/><span class="hl-1">    </span><span class="hl-6">// si la carta no está en el array</span><br/><span class="hl-1">    </span><span class="hl-10">if</span><span class="hl-1"> (</span><span class="hl-13">index</span><span class="hl-1"> == -</span><span class="hl-9">1</span><span class="hl-1">) {</span><br/><span class="hl-1">      </span><span class="hl-10">throw</span><span class="hl-1"> </span><span class="hl-3">new</span><span class="hl-1"> </span><span class="hl-0">Error</span><span class="hl-1">(</span><span class="hl-2">&quot;no se ha encontrado la carta&quot;</span><span class="hl-1">)</span><br/><span class="hl-1">    }</span><br/><br/><span class="hl-1">    </span><span class="hl-3">this</span><span class="hl-1">.</span><span class="hl-0">PrintCardInfo</span><span class="hl-1">(</span><span class="hl-3">this</span><span class="hl-1">.</span><span class="hl-13">cartas</span><span class="hl-1">[</span><span class="hl-13">index</span><span class="hl-1">]);</span><br/><span class="hl-1">    </span><br/><span class="hl-1">  }</span><br/><br/><span class="hl-1">  </span><span class="hl-6">/**</span><br/><span class="hl-6">   * Método que modifica la información de una carta</span><br/><span class="hl-6">   * </span><span class="hl-3">@param</span><span class="hl-6"> </span><span class="hl-13">id</span><span class="hl-6"> id de la carta a modificar</span><br/><span class="hl-6">   * </span><span class="hl-3">@param</span><span class="hl-6"> </span><span class="hl-13">params</span><span class="hl-6"> información a modificar de la carta</span><br/><span class="hl-6">   */</span><br/><span class="hl-1">  </span><span class="hl-0">updateCard</span><span class="hl-1">(</span><span class="hl-13">argstochange</span><span class="hl-1">: </span><span class="hl-11">any</span><span class="hl-1">): </span><span class="hl-11">void</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-3">const</span><span class="hl-1"> </span><span class="hl-12">index</span><span class="hl-1"> = </span><span class="hl-3">this</span><span class="hl-1">.</span><span class="hl-13">cartas</span><span class="hl-1">.</span><span class="hl-0">findIndex</span><span class="hl-1">((</span><span class="hl-13">carta</span><span class="hl-1">) </span><span class="hl-3">=&gt;</span><span class="hl-1"> </span><span class="hl-13">carta</span><span class="hl-1">.</span><span class="hl-12">ID</span><span class="hl-1"> === </span><span class="hl-13">argstochange</span><span class="hl-1">.</span><span class="hl-13">id</span><span class="hl-1">);</span><br/><span class="hl-1">    </span><span class="hl-6">// si la carta no está en el array</span><br/><span class="hl-1">    </span><span class="hl-10">if</span><span class="hl-1"> (</span><span class="hl-13">index</span><span class="hl-1"> == -</span><span class="hl-9">1</span><span class="hl-1">) {</span><br/><span class="hl-1">      </span><span class="hl-10">throw</span><span class="hl-1"> </span><span class="hl-3">new</span><span class="hl-1"> </span><span class="hl-0">Error</span><span class="hl-1">(</span><span class="hl-2">&quot;no se ha encontrado la carta&quot;</span><span class="hl-1">)</span><br/><span class="hl-1">    }</span><br/><br/><span class="hl-1">    </span><span class="hl-10">if</span><span class="hl-1"> (</span><span class="hl-13">argstochange</span><span class="hl-1">.</span><span class="hl-13">name</span><span class="hl-1">) </span><span class="hl-3">this</span><span class="hl-1">.</span><span class="hl-13">cartas</span><span class="hl-1">[</span><span class="hl-13">index</span><span class="hl-1">].</span><span class="hl-13">Name</span><span class="hl-1"> = </span><span class="hl-13">argstochange</span><span class="hl-1">.</span><span class="hl-13">name</span><span class="hl-1">;</span><br/><span class="hl-1">    </span><span class="hl-10">if</span><span class="hl-1"> (</span><span class="hl-13">argstochange</span><span class="hl-1">.</span><span class="hl-13">manacost</span><span class="hl-1">) </span><span class="hl-3">this</span><span class="hl-1">.</span><span class="hl-13">cartas</span><span class="hl-1">[</span><span class="hl-13">index</span><span class="hl-1">].</span><span class="hl-13">ManaCost</span><span class="hl-1"> = </span><span class="hl-13">argstochange</span><span class="hl-1">.</span><span class="hl-13">manacost</span><span class="hl-1">;</span><br/><span class="hl-1">    </span><span class="hl-10">if</span><span class="hl-1"> (</span><span class="hl-13">argstochange</span><span class="hl-1">.</span><span class="hl-13">color</span><span class="hl-1">) </span><span class="hl-3">this</span><span class="hl-1">.</span><span class="hl-13">cartas</span><span class="hl-1">[</span><span class="hl-13">index</span><span class="hl-1">].</span><span class="hl-13">Color</span><span class="hl-1"> = </span><span class="hl-13">Functions</span><span class="hl-1">.</span><span class="hl-0">GetColorValue</span><span class="hl-1">(</span><span class="hl-13">argstochange</span><span class="hl-1">.</span><span class="hl-13">color</span><span class="hl-1">);</span><br/><span class="hl-1">    </span><span class="hl-10">if</span><span class="hl-1"> (</span><span class="hl-13">argstochange</span><span class="hl-1">.</span><span class="hl-13">timeline</span><span class="hl-1">) </span><span class="hl-3">this</span><span class="hl-1">.</span><span class="hl-13">cartas</span><span class="hl-1">[</span><span class="hl-13">index</span><span class="hl-1">].</span><span class="hl-13">TimeLine</span><span class="hl-1"> = </span><span class="hl-13">Functions</span><span class="hl-1">.</span><span class="hl-0">GetTimeLineValue</span><span class="hl-1">(</span><span class="hl-13">argstochange</span><span class="hl-1">.</span><span class="hl-13">timeline</span><span class="hl-1">);</span><br/><span class="hl-1">    </span><span class="hl-10">if</span><span class="hl-1"> (</span><span class="hl-13">argstochange</span><span class="hl-1">.</span><span class="hl-13">rarity</span><span class="hl-1">) </span><span class="hl-3">this</span><span class="hl-1">.</span><span class="hl-13">cartas</span><span class="hl-1">[</span><span class="hl-13">index</span><span class="hl-1">].</span><span class="hl-13">Rarity</span><span class="hl-1"> = </span><span class="hl-13">Functions</span><span class="hl-1">.</span><span class="hl-0">GetRarityValue</span><span class="hl-1">(</span><span class="hl-13">argstochange</span><span class="hl-1">.</span><span class="hl-13">rarity</span><span class="hl-1">);</span><br/><span class="hl-1">    </span><span class="hl-10">if</span><span class="hl-1"> (</span><span class="hl-13">argstochange</span><span class="hl-1">.</span><span class="hl-13">rules</span><span class="hl-1">) </span><span class="hl-3">this</span><span class="hl-1">.</span><span class="hl-13">cartas</span><span class="hl-1">[</span><span class="hl-13">index</span><span class="hl-1">].</span><span class="hl-13">Rules</span><span class="hl-1"> = </span><span class="hl-13">argstochange</span><span class="hl-1">.</span><span class="hl-13">rules</span><span class="hl-1">;</span><br/><span class="hl-1">    </span><span class="hl-10">if</span><span class="hl-1"> (</span><span class="hl-13">argstochange</span><span class="hl-1">.</span><span class="hl-13">value</span><span class="hl-1">) </span><span class="hl-3">this</span><span class="hl-1">.</span><span class="hl-13">cartas</span><span class="hl-1">[</span><span class="hl-13">index</span><span class="hl-1">].</span><span class="hl-13">Value</span><span class="hl-1"> = </span><span class="hl-13">argstochange</span><span class="hl-1">.</span><span class="hl-13">value</span><span class="hl-1">;</span><br/><span class="hl-1">    </span><span class="hl-10">if</span><span class="hl-1"> (</span><span class="hl-13">argstochange</span><span class="hl-1">.</span><span class="hl-13">strength</span><span class="hl-1">) </span><span class="hl-3">this</span><span class="hl-1">.</span><span class="hl-13">cartas</span><span class="hl-1">[</span><span class="hl-13">index</span><span class="hl-1">].</span><span class="hl-13">Strength</span><span class="hl-1"> = </span><span class="hl-13">argstochange</span><span class="hl-1">.</span><span class="hl-13">strength</span><span class="hl-1">;</span><br/><span class="hl-1">    </span><span class="hl-10">if</span><span class="hl-1"> (</span><span class="hl-13">argstochange</span><span class="hl-1">.</span><span class="hl-13">loyalty</span><span class="hl-1">) </span><span class="hl-3">this</span><span class="hl-1">.</span><span class="hl-13">cartas</span><span class="hl-1">[</span><span class="hl-13">index</span><span class="hl-1">].</span><span class="hl-13">Loyalty</span><span class="hl-1"> = </span><span class="hl-13">argstochange</span><span class="hl-1">.</span><span class="hl-13">loyalty</span><span class="hl-1">;</span><br/><span class="hl-1">    </span><br/><span class="hl-1">  }</span><br/><br/><span class="hl-1">  </span><span class="hl-0">PrintCardInfo</span><span class="hl-1">(</span><span class="hl-13">card</span><span class="hl-1">: </span><span class="hl-11">Carta</span><span class="hl-1">): </span><span class="hl-11">void</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-13">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-2">&quot;ID: &quot;</span><span class="hl-1"> + </span><span class="hl-13">card</span><span class="hl-1">.</span><span class="hl-12">ID</span><span class="hl-1">);</span><br/><span class="hl-1">      </span><span class="hl-13">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-2">&quot;Nombre: &quot;</span><span class="hl-1"> + </span><span class="hl-13">card</span><span class="hl-1">.</span><span class="hl-13">Name</span><span class="hl-1">);</span><br/><span class="hl-1">      </span><span class="hl-13">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-2">&quot;Coste de mana: &quot;</span><span class="hl-1"> + </span><span class="hl-13">card</span><span class="hl-1">.</span><span class="hl-13">ManaCost</span><span class="hl-1">);</span><br/><span class="hl-1">      </span><span class="hl-6">// diferencio entre coloress</span><br/><span class="hl-1">      </span><span class="hl-10">switch</span><span class="hl-1"> (</span><span class="hl-13">card</span><span class="hl-1">.</span><span class="hl-13">Color</span><span class="hl-1">) {</span><br/><span class="hl-1">        </span><span class="hl-10">case</span><span class="hl-1"> </span><span class="hl-13">Color</span><span class="hl-1">.</span><span class="hl-13">blanco</span><span class="hl-1">:</span><br/><span class="hl-1">          </span><span class="hl-13">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-2">&quot;Color: &quot;</span><span class="hl-1"> + </span><span class="hl-13">chalk</span><span class="hl-1">.</span><span class="hl-0">white</span><span class="hl-1">(</span><span class="hl-2">&quot;blanco&quot;</span><span class="hl-1">));</span><br/><span class="hl-1">          </span><span class="hl-10">break</span><span class="hl-1">;</span><br/><span class="hl-1">        </span><span class="hl-10">case</span><span class="hl-1"> </span><span class="hl-13">Color</span><span class="hl-1">.</span><span class="hl-13">azul</span><span class="hl-1">:</span><br/><span class="hl-1">          </span><span class="hl-13">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-2">&quot;Color: &quot;</span><span class="hl-1"> + </span><span class="hl-13">chalk</span><span class="hl-1">.</span><span class="hl-0">blue</span><span class="hl-1">(</span><span class="hl-2">&quot;azul&quot;</span><span class="hl-1">));</span><br/><span class="hl-1">          </span><span class="hl-10">break</span><span class="hl-1">;</span><br/><span class="hl-1">        </span><span class="hl-10">case</span><span class="hl-1"> </span><span class="hl-13">Color</span><span class="hl-1">.</span><span class="hl-13">negro</span><span class="hl-1">:</span><br/><span class="hl-1">          </span><span class="hl-13">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-2">&quot;Color: &quot;</span><span class="hl-1"> + </span><span class="hl-13">chalk</span><span class="hl-1">.</span><span class="hl-0">black</span><span class="hl-1">(</span><span class="hl-2">&quot;negro&quot;</span><span class="hl-1">));</span><br/><span class="hl-1">          </span><span class="hl-10">break</span><span class="hl-1">;</span><br/><span class="hl-1">        </span><span class="hl-10">case</span><span class="hl-1"> </span><span class="hl-13">Color</span><span class="hl-1">.</span><span class="hl-13">rojo</span><span class="hl-1">:</span><br/><span class="hl-1">          </span><span class="hl-13">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-2">&quot;Color: &quot;</span><span class="hl-1"> + </span><span class="hl-13">chalk</span><span class="hl-1">.</span><span class="hl-0">red</span><span class="hl-1">(</span><span class="hl-2">&quot;rojo&quot;</span><span class="hl-1">));</span><br/><span class="hl-1">          </span><span class="hl-10">break</span><span class="hl-1">;</span><br/><span class="hl-1">        </span><span class="hl-10">case</span><span class="hl-1"> </span><span class="hl-13">Color</span><span class="hl-1">.</span><span class="hl-13">verde</span><span class="hl-1">:</span><br/><span class="hl-1">          </span><span class="hl-13">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-2">&quot;Color: &quot;</span><span class="hl-1"> + </span><span class="hl-13">chalk</span><span class="hl-1">.</span><span class="hl-0">green</span><span class="hl-1">(</span><span class="hl-2">&quot;verde&quot;</span><span class="hl-1">));</span><br/><span class="hl-1">          </span><span class="hl-10">break</span><span class="hl-1">;</span><br/><span class="hl-1">        </span><span class="hl-10">case</span><span class="hl-1"> </span><span class="hl-13">Color</span><span class="hl-1">.</span><span class="hl-13">incoloro</span><span class="hl-1">:</span><br/><span class="hl-1">          </span><span class="hl-13">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-2">&quot;Color: &quot;</span><span class="hl-1"> + </span><span class="hl-13">chalk</span><span class="hl-1">.</span><span class="hl-0">white</span><span class="hl-1">(</span><span class="hl-2">&quot;incoloro&quot;</span><span class="hl-1">));</span><br/><span class="hl-1">          </span><span class="hl-10">break</span><span class="hl-1">;</span><br/><span class="hl-1">        </span><span class="hl-10">case</span><span class="hl-1"> </span><span class="hl-13">Color</span><span class="hl-1">.</span><span class="hl-13">multicolor</span><span class="hl-1">:</span><br/><span class="hl-1">          </span><span class="hl-13">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-2">&quot;Color: &quot;</span><span class="hl-1"> + </span><span class="hl-13">chalk</span><span class="hl-1">.</span><span class="hl-0">red</span><span class="hl-1">(</span><span class="hl-2">&quot;mu&quot;</span><span class="hl-1">) + </span><span class="hl-13">chalk</span><span class="hl-1">.</span><span class="hl-0">green</span><span class="hl-1">(</span><span class="hl-2">&quot;lti&quot;</span><span class="hl-1">) + </span><span class="hl-13">chalk</span><span class="hl-1">.</span><span class="hl-0">blue</span><span class="hl-1">(</span><span class="hl-2">&quot;col&quot;</span><span class="hl-1">) + </span><span class="hl-13">chalk</span><span class="hl-1">.</span><span class="hl-0">yellow</span><span class="hl-1">(</span><span class="hl-2">&quot;or&quot;</span><span class="hl-1">));</span><br/><span class="hl-1">          </span><span class="hl-10">break</span><span class="hl-1">;</span><br/><span class="hl-1">      }</span><br/><span class="hl-1">      </span><br/><span class="hl-1">      </span><span class="hl-6">// diferencio entre las lineas de tiempo</span><br/><span class="hl-1">      </span><span class="hl-10">switch</span><span class="hl-1"> (</span><span class="hl-13">card</span><span class="hl-1">.</span><span class="hl-13">TimeLine</span><span class="hl-1">) {</span><br/><span class="hl-1">        </span><span class="hl-10">case</span><span class="hl-1"> </span><span class="hl-9">0</span><span class="hl-1">:</span><br/><span class="hl-1">          </span><span class="hl-13">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-2">&quot;Linea de tiempo: tierra&quot;</span><span class="hl-1">);</span><br/><span class="hl-1">          </span><span class="hl-10">break</span><span class="hl-1">;</span><br/><span class="hl-1">        </span><span class="hl-10">case</span><span class="hl-1"> </span><span class="hl-9">1</span><span class="hl-1">:</span><br/><span class="hl-1">          </span><span class="hl-13">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-2">&quot;Linea de tiempo: criatura&quot;</span><span class="hl-1">);</span><br/><span class="hl-1">          </span><span class="hl-10">break</span><span class="hl-1">;</span><br/><span class="hl-1">        </span><span class="hl-10">case</span><span class="hl-1"> </span><span class="hl-9">2</span><span class="hl-1">:</span><br/><span class="hl-1">          </span><span class="hl-13">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-2">&quot;Linea de tiempo: encantamiento&quot;</span><span class="hl-1">);</span><br/><span class="hl-1">          </span><span class="hl-10">break</span><span class="hl-1">;</span><br/><span class="hl-1">        </span><span class="hl-10">case</span><span class="hl-1"> </span><span class="hl-9">3</span><span class="hl-1">:</span><br/><span class="hl-1">          </span><span class="hl-13">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-2">&quot;Linea de tiempo: conjuro&quot;</span><span class="hl-1">);</span><br/><span class="hl-1">          </span><span class="hl-10">break</span><span class="hl-1">;</span><br/><span class="hl-1">        </span><span class="hl-10">case</span><span class="hl-1"> </span><span class="hl-9">4</span><span class="hl-1">:</span><br/><span class="hl-1">          </span><span class="hl-13">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-2">&quot;Linea de tiempo: instantáneo&quot;</span><span class="hl-1">);</span><br/><span class="hl-1">          </span><span class="hl-10">break</span><span class="hl-1">;</span><br/><span class="hl-1">        </span><span class="hl-10">case</span><span class="hl-1"> </span><span class="hl-9">5</span><span class="hl-1">:</span><br/><span class="hl-1">          </span><span class="hl-13">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-2">&quot;Linea de tiempo: artefacto&quot;</span><span class="hl-1">);</span><br/><span class="hl-1">          </span><span class="hl-10">break</span><span class="hl-1">;</span><br/><span class="hl-1">        </span><span class="hl-10">case</span><span class="hl-1"> </span><span class="hl-9">6</span><span class="hl-1">:</span><br/><span class="hl-1">          </span><span class="hl-13">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-2">&quot;Linea de tiempo: planeswalker&quot;</span><span class="hl-1">);</span><br/><span class="hl-1">          </span><span class="hl-10">break</span><span class="hl-1">;</span><br/><span class="hl-1">      }</span><br/><br/><span class="hl-1">      </span><span class="hl-6">// diferencio entre las rarezas</span><br/><span class="hl-1">      </span><span class="hl-10">switch</span><span class="hl-1"> (</span><span class="hl-13">card</span><span class="hl-1">.</span><span class="hl-13">Rarity</span><span class="hl-1">) {</span><br/><span class="hl-1">        </span><span class="hl-10">case</span><span class="hl-1"> </span><span class="hl-9">0</span><span class="hl-1">:</span><br/><span class="hl-1">          </span><span class="hl-13">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-2">&quot;Rareza: común&quot;</span><span class="hl-1">);</span><br/><span class="hl-1">          </span><span class="hl-10">break</span><span class="hl-1">;</span><br/><span class="hl-1">        </span><span class="hl-10">case</span><span class="hl-1"> </span><span class="hl-9">1</span><span class="hl-1">:</span><br/><span class="hl-1">          </span><span class="hl-13">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-2">&quot;Rareza: infrecuente&quot;</span><span class="hl-1">);</span><br/><span class="hl-1">          </span><span class="hl-10">break</span><span class="hl-1">;</span><br/><span class="hl-1">        </span><span class="hl-10">case</span><span class="hl-1"> </span><span class="hl-9">2</span><span class="hl-1">:</span><br/><span class="hl-1">          </span><span class="hl-13">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-2">&quot;Rareza: rara&quot;</span><span class="hl-1">);</span><br/><span class="hl-1">          </span><span class="hl-10">break</span><span class="hl-1">;</span><br/><span class="hl-1">        </span><span class="hl-10">case</span><span class="hl-1"> </span><span class="hl-9">3</span><span class="hl-1">:</span><br/><span class="hl-1">          </span><span class="hl-13">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-2">&quot;Rareza: mítica&quot;</span><span class="hl-1">);</span><br/><span class="hl-1">          </span><span class="hl-10">break</span><span class="hl-1">;</span><br/><span class="hl-1">        </span><span class="hl-10">case</span><span class="hl-1"> </span><span class="hl-9">4</span><span class="hl-1">:</span><br/><span class="hl-1">          </span><span class="hl-13">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-2">&quot;Rareza: legendaria&quot;</span><span class="hl-1">);</span><br/><span class="hl-1">          </span><span class="hl-10">break</span><span class="hl-1">;</span><br/><span class="hl-1">      }</span><br/><span class="hl-1">      </span><span class="hl-13">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-2">&quot;Reglas: &quot;</span><span class="hl-1"> + </span><span class="hl-13">card</span><span class="hl-1">.</span><span class="hl-13">Rules</span><span class="hl-1">);</span><br/><span class="hl-1">      </span><span class="hl-13">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-2">&quot;Fuerza / resistencia: &quot;</span><span class="hl-1"> + (</span><span class="hl-13">card</span><span class="hl-1">.</span><span class="hl-13">Strength</span><span class="hl-1"> || </span><span class="hl-2">&quot;No aplica&quot;</span><span class="hl-1">));</span><br/><span class="hl-1">      </span><span class="hl-13">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-2">&quot;Lealtad: &quot;</span><span class="hl-1"> + (</span><span class="hl-13">card</span><span class="hl-1">.</span><span class="hl-13">Loyalty</span><span class="hl-1"> || </span><span class="hl-2">&quot;No aplica&quot;</span><span class="hl-1">));</span><br/><span class="hl-1">      </span><span class="hl-13">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-2">&quot;Valor de mercado: &quot;</span><span class="hl-1"> + </span><span class="hl-13">card</span><span class="hl-1">.</span><span class="hl-13">Value</span><span class="hl-1">);</span><br/><span class="hl-1">  }</span><br/><br/><span class="hl-1">}</span>
</code><button>Copy</button></pre>
<p>functions.ts: Define funciones utilitarias para cargar y guardar cartas desde/hacia archivos, así como funciones para obtener los valores numéricos de los enums Color, TimeLine y Rarity dado una string.</p>
<pre><code class="language-ts"><span class="hl-10">import</span><span class="hl-1"> </span><span class="hl-13">fs</span><span class="hl-1">, { </span><span class="hl-13">stat</span><span class="hl-1"> } </span><span class="hl-10">from</span><span class="hl-1"> </span><span class="hl-2">&#39;fs&#39;</span><br/><span class="hl-10">import</span><span class="hl-1"> </span><span class="hl-3">*</span><span class="hl-1"> </span><span class="hl-10">as</span><span class="hl-1"> </span><span class="hl-13">Carta</span><span class="hl-1"> </span><span class="hl-10">from</span><span class="hl-1"> </span><span class="hl-2">&#39;./card.js&#39;</span><br/><span class="hl-10">import</span><span class="hl-1"> </span><span class="hl-13">chalk</span><span class="hl-1"> </span><span class="hl-10">from</span><span class="hl-1"> </span><span class="hl-2">&#39;chalk&#39;</span><span class="hl-1">;</span><br/><br/><br/><span class="hl-6">/**</span><br/><span class="hl-6"> * función para guardar la colección en el fichero</span><br/><span class="hl-6"> * </span><span class="hl-3">@param</span><span class="hl-6"> </span><span class="hl-13">user</span><span class="hl-6"> usuario que posee la colección</span><br/><span class="hl-6"> * </span><span class="hl-3">@param</span><span class="hl-6"> </span><span class="hl-13">cartas</span><span class="hl-6"> cartas que desea guardar</span><br/><span class="hl-6"> */</span><br/><span class="hl-10">export</span><span class="hl-1"> </span><span class="hl-3">function</span><span class="hl-1"> </span><span class="hl-0">SaveCard</span><span class="hl-1">(</span><span class="hl-13">user</span><span class="hl-1">: </span><span class="hl-11">string</span><span class="hl-1">, </span><span class="hl-13">cartas</span><span class="hl-1">: </span><span class="hl-11">Carta</span><span class="hl-1">.</span><span class="hl-11">Carta</span><span class="hl-1">[]): </span><span class="hl-11">void</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-3">const</span><span class="hl-1"> </span><span class="hl-12">userDirectory</span><span class="hl-1"> = </span><span class="hl-2">&quot;./cartas/&quot;</span><span class="hl-1"> + </span><span class="hl-13">user</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-3">const</span><span class="hl-1"> </span><span class="hl-12">fileName</span><span class="hl-1"> = </span><span class="hl-13">userDirectory</span><span class="hl-1"> + </span><span class="hl-2">&quot;/&quot;</span><span class="hl-1"> + </span><span class="hl-13">user</span><span class="hl-1"> + </span><span class="hl-2">&quot;.json&quot;</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-13">fs</span><span class="hl-1">.</span><span class="hl-0">truncateSync</span><span class="hl-1">(</span><span class="hl-13">fileName</span><span class="hl-1">, </span><span class="hl-9">0</span><span class="hl-1">)</span><br/><span class="hl-1">  </span><span class="hl-13">fs</span><span class="hl-1">.</span><span class="hl-0">writeFileSync</span><span class="hl-1">(</span><span class="hl-13">fileName</span><span class="hl-1">, </span><span class="hl-12">JSON</span><span class="hl-1">.</span><span class="hl-0">stringify</span><span class="hl-1">(</span><span class="hl-13">cartas</span><span class="hl-1">));</span><br/><span class="hl-1">}</span><br/><br/><span class="hl-6">/**</span><br/><span class="hl-6"> * Función para cargar las cartas de un usuario</span><br/><span class="hl-6"> * </span><span class="hl-3">@param</span><span class="hl-6"> </span><span class="hl-13">user</span><span class="hl-6"> usuario que posee la colección</span><br/><span class="hl-6"> * </span><span class="hl-3">@returns</span><span class="hl-6"> cartas del usuario</span><br/><span class="hl-6"> */</span><br/><span class="hl-10">export</span><span class="hl-1"> </span><span class="hl-3">function</span><span class="hl-1"> </span><span class="hl-0">LoadCards</span><span class="hl-1">(</span><span class="hl-13">user</span><span class="hl-1">: </span><span class="hl-11">string</span><span class="hl-1">): </span><span class="hl-11">Carta</span><span class="hl-1">.</span><span class="hl-11">Carta</span><span class="hl-1">[] {</span><br/><span class="hl-1">  </span><span class="hl-3">const</span><span class="hl-1"> </span><span class="hl-12">userDirectory</span><span class="hl-1"> = </span><span class="hl-2">&quot;./cartas/&quot;</span><span class="hl-1"> + </span><span class="hl-13">user</span><br/><span class="hl-1">  </span><span class="hl-3">const</span><span class="hl-1"> </span><span class="hl-12">fileName</span><span class="hl-1"> = </span><span class="hl-13">userDirectory</span><span class="hl-1"> + </span><span class="hl-2">&quot;/&quot;</span><span class="hl-1"> + </span><span class="hl-13">user</span><span class="hl-1"> + </span><span class="hl-2">&quot;.json&quot;</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><br/><span class="hl-1">  </span><span class="hl-6">// Comprobamos si existe el directorio del usuario</span><br/><span class="hl-1">  </span><span class="hl-10">if</span><span class="hl-1"> (!</span><span class="hl-13">fs</span><span class="hl-1">.</span><span class="hl-0">existsSync</span><span class="hl-1">(</span><span class="hl-13">userDirectory</span><span class="hl-1">)) {</span><br/><span class="hl-1">    </span><span class="hl-13">fs</span><span class="hl-1">.</span><span class="hl-0">mkdirSync</span><span class="hl-1">(</span><span class="hl-13">userDirectory</span><span class="hl-1">, { </span><span class="hl-13">recursive:</span><span class="hl-1"> </span><span class="hl-3">true</span><span class="hl-1"> });</span><br/><span class="hl-1">    </span><span class="hl-13">fs</span><span class="hl-1">.</span><span class="hl-0">writeFileSync</span><span class="hl-1">(</span><span class="hl-13">fileName</span><span class="hl-1">, </span><span class="hl-12">JSON</span><span class="hl-1">.</span><span class="hl-0">stringify</span><span class="hl-1">(</span><span class="hl-2">&quot;&quot;</span><span class="hl-1">))</span><br/><span class="hl-1">  }</span><br/><br/><span class="hl-1">  </span><span class="hl-6">// sacamos las estadisticas del fichero</span><br/><span class="hl-1">  </span><span class="hl-3">const</span><span class="hl-1"> </span><span class="hl-12">stats</span><span class="hl-1"> = </span><span class="hl-13">fs</span><span class="hl-1">.</span><span class="hl-0">statSync</span><span class="hl-1">(</span><span class="hl-13">fileName</span><span class="hl-1">);</span><br/><br/><span class="hl-1">  </span><span class="hl-6">// si el fichero está vacío</span><br/><span class="hl-1">  </span><span class="hl-10">if</span><span class="hl-1"> (</span><span class="hl-13">stats</span><span class="hl-1">.</span><span class="hl-13">size</span><span class="hl-1"> === </span><span class="hl-9">2</span><span class="hl-1">) {</span><br/><span class="hl-1">    </span><br/><span class="hl-1">    </span><span class="hl-6">// devolvemos un array vacío</span><br/><span class="hl-1">    </span><span class="hl-13">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-13">chalk</span><span class="hl-1">.</span><span class="hl-0">green</span><span class="hl-1">(</span><span class="hl-2">&quot;No se encontró colección, creando una nueva colección al usuario &quot;</span><span class="hl-1"> + </span><span class="hl-13">user</span><span class="hl-1">));</span><br/><span class="hl-1">    </span><span class="hl-13">fs</span><span class="hl-1">.</span><span class="hl-0">writeFileSync</span><span class="hl-1">(</span><span class="hl-13">fileName</span><span class="hl-1">, </span><span class="hl-12">JSON</span><span class="hl-1">.</span><span class="hl-0">stringify</span><span class="hl-1">([]));</span><br/><span class="hl-1">    </span><span class="hl-10">return</span><span class="hl-1"> []</span><br/><span class="hl-1">    </span><br/><span class="hl-1">  } </span><span class="hl-10">else</span><span class="hl-1"> { </span><span class="hl-6">// si el fichero tiene contenido creamos las cartas y devolvemos el array de cartas</span><br/><br/><span class="hl-1">    </span><span class="hl-3">const</span><span class="hl-1"> </span><span class="hl-12">jsoncontent</span><span class="hl-1"> = </span><span class="hl-13">fs</span><span class="hl-1">.</span><span class="hl-0">readFileSync</span><span class="hl-1">(</span><span class="hl-13">fileName</span><span class="hl-1">, </span><span class="hl-2">&#39;utf-8&#39;</span><span class="hl-1">);</span><br/><span class="hl-1">    </span><span class="hl-3">const</span><span class="hl-1"> </span><span class="hl-12">jsoncards</span><span class="hl-1"> = </span><span class="hl-12">JSON</span><span class="hl-1">.</span><span class="hl-0">parse</span><span class="hl-1">(</span><span class="hl-13">jsoncontent</span><span class="hl-1">);</span><br/><span class="hl-1">    </span><br/><span class="hl-1">    </span><span class="hl-3">const</span><span class="hl-1"> </span><span class="hl-12">cards</span><span class="hl-1">: </span><span class="hl-11">Carta</span><span class="hl-1">.</span><span class="hl-11">Carta</span><span class="hl-1">[] = </span><span class="hl-13">jsoncards</span><span class="hl-1">.</span><span class="hl-0">map</span><span class="hl-1">((</span><span class="hl-13">carta</span><span class="hl-1">: </span><span class="hl-11">Carta</span><span class="hl-1">.</span><span class="hl-11">Carta</span><span class="hl-1">) </span><span class="hl-3">=&gt;</span><span class="hl-1"> ({</span><br/><span class="hl-1">      </span><span class="hl-13">ID:</span><span class="hl-1"> </span><span class="hl-13">carta</span><span class="hl-1">.</span><span class="hl-12">ID</span><span class="hl-1">,</span><br/><span class="hl-1">      </span><span class="hl-13">Name:</span><span class="hl-1"> </span><span class="hl-13">carta</span><span class="hl-1">.</span><span class="hl-13">Name</span><span class="hl-1">,</span><br/><span class="hl-1">      </span><span class="hl-13">ManaCost:</span><span class="hl-1"> </span><span class="hl-13">carta</span><span class="hl-1">.</span><span class="hl-13">ManaCost</span><span class="hl-1">,</span><br/><span class="hl-1">      </span><span class="hl-13">Color:</span><span class="hl-1"> </span><span class="hl-13">carta</span><span class="hl-1">.</span><span class="hl-13">Color</span><span class="hl-1">,</span><br/><span class="hl-1">      </span><span class="hl-13">TimeLine:</span><span class="hl-1"> </span><span class="hl-13">carta</span><span class="hl-1">.</span><span class="hl-13">TimeLine</span><span class="hl-1">,</span><br/><span class="hl-1">      </span><span class="hl-13">Rarity:</span><span class="hl-1"> </span><span class="hl-13">carta</span><span class="hl-1">.</span><span class="hl-13">Rarity</span><span class="hl-1">,</span><br/><span class="hl-1">      </span><span class="hl-13">Rules:</span><span class="hl-1"> </span><span class="hl-13">carta</span><span class="hl-1">.</span><span class="hl-13">Rules</span><span class="hl-1">,</span><br/><span class="hl-1">      </span><span class="hl-13">Strength:</span><span class="hl-1"> </span><span class="hl-13">carta</span><span class="hl-1">.</span><span class="hl-13">Strength</span><span class="hl-1">,</span><br/><span class="hl-1">      </span><span class="hl-13">Loyalty:</span><span class="hl-1"> </span><span class="hl-13">carta</span><span class="hl-1">.</span><span class="hl-13">Loyalty</span><span class="hl-1">,</span><br/><span class="hl-1">      </span><span class="hl-13">Value:</span><span class="hl-1"> </span><span class="hl-13">carta</span><span class="hl-1">.</span><span class="hl-13">Value</span><br/><span class="hl-1">    }));</span><br/><br/><span class="hl-1">    </span><span class="hl-10">return</span><span class="hl-1"> </span><span class="hl-13">cards</span><span class="hl-1">;</span><br/><br/><span class="hl-1">  }</span><br/><span class="hl-1">}</span><br/><br/><span class="hl-6">/**</span><br/><span class="hl-6"> * Función que devuelve el index del enum Color</span><br/><span class="hl-6"> * </span><span class="hl-3">@param</span><span class="hl-6"> </span><span class="hl-13">colorstring</span><span class="hl-6"> color de la carta</span><br/><span class="hl-6"> * </span><span class="hl-3">@returns</span><span class="hl-6"> index del enum Color</span><br/><span class="hl-6"> */</span><br/><span class="hl-10">export</span><span class="hl-1"> </span><span class="hl-3">function</span><span class="hl-1"> </span><span class="hl-0">GetColorValue</span><span class="hl-1">(</span><span class="hl-13">colorstring</span><span class="hl-1">: </span><span class="hl-11">string</span><span class="hl-1">): </span><span class="hl-11">number</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-3">const</span><span class="hl-1"> </span><span class="hl-12">colorValue</span><span class="hl-1"> = </span><span class="hl-13">colorstring</span><span class="hl-1">.</span><span class="hl-0">toLowerCase</span><span class="hl-1">() </span><span class="hl-10">as</span><span class="hl-1"> </span><span class="hl-3">keyof</span><span class="hl-1"> </span><span class="hl-3">typeof</span><span class="hl-1"> </span><span class="hl-13">Carta</span><span class="hl-1">.</span><span class="hl-13">Color</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-10">return</span><span class="hl-1"> </span><span class="hl-13">Carta</span><span class="hl-1">.</span><span class="hl-13">Color</span><span class="hl-1">[</span><span class="hl-13">colorValue</span><span class="hl-1">];</span><br/><span class="hl-1">}</span><br/><br/><span class="hl-6">/**</span><br/><span class="hl-6"> * Función que devuelve el index del enum TimeLine</span><br/><span class="hl-6"> * </span><span class="hl-3">@param</span><span class="hl-6"> </span><span class="hl-13">timelinestring</span><span class="hl-6"> linea temporal de la carta</span><br/><span class="hl-6"> * </span><span class="hl-3">@returns</span><span class="hl-6"> index del enum TimeLine</span><br/><span class="hl-6"> */</span><br/><span class="hl-10">export</span><span class="hl-1"> </span><span class="hl-3">function</span><span class="hl-1"> </span><span class="hl-0">GetTimeLineValue</span><span class="hl-1">(</span><span class="hl-13">timeline</span><span class="hl-1">: </span><span class="hl-11">string</span><span class="hl-1">): </span><span class="hl-11">number</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-3">const</span><span class="hl-1"> </span><span class="hl-12">timelinevalue</span><span class="hl-1"> = </span><span class="hl-13">timeline</span><span class="hl-1">.</span><span class="hl-0">toLowerCase</span><span class="hl-1">() </span><span class="hl-10">as</span><span class="hl-1"> </span><span class="hl-3">keyof</span><span class="hl-1"> </span><span class="hl-3">typeof</span><span class="hl-1"> </span><span class="hl-13">Carta</span><span class="hl-1">.</span><span class="hl-13">TimeLine</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-10">return</span><span class="hl-1"> </span><span class="hl-13">Carta</span><span class="hl-1">.</span><span class="hl-13">TimeLine</span><span class="hl-1">[</span><span class="hl-13">timelinevalue</span><span class="hl-1">];</span><br/><span class="hl-1">}</span><br/><br/><span class="hl-6">/**</span><br/><span class="hl-6"> * Función que devuelve el index del enum Rarity</span><br/><span class="hl-6"> * </span><span class="hl-3">@param</span><span class="hl-6"> </span><span class="hl-13">rarity</span><span class="hl-6"> rareza de la carta</span><br/><span class="hl-6"> * </span><span class="hl-3">@returns</span><span class="hl-6"> index del enum Rarity</span><br/><span class="hl-6"> */</span><br/><span class="hl-10">export</span><span class="hl-1"> </span><span class="hl-3">function</span><span class="hl-1"> </span><span class="hl-0">GetRarityValue</span><span class="hl-1">(</span><span class="hl-13">rarity</span><span class="hl-1">: </span><span class="hl-11">string</span><span class="hl-1">): </span><span class="hl-11">number</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-3">const</span><span class="hl-1"> </span><span class="hl-12">rarityValue</span><span class="hl-1"> = </span><span class="hl-13">rarity</span><span class="hl-1">.</span><span class="hl-0">toLowerCase</span><span class="hl-1">() </span><span class="hl-10">as</span><span class="hl-1"> </span><span class="hl-3">keyof</span><span class="hl-1"> </span><span class="hl-3">typeof</span><span class="hl-1"> </span><span class="hl-13">Carta</span><span class="hl-1">.</span><span class="hl-13">Rarity</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-10">return</span><span class="hl-1"> </span><span class="hl-13">Carta</span><span class="hl-1">.</span><span class="hl-13">Rarity</span><span class="hl-1">[</span><span class="hl-13">rarityValue</span><span class="hl-1">];</span><br/><span class="hl-1">}</span><br/><br/><span class="hl-6">/**</span><br/><span class="hl-6"> * Función que crea una carta</span><br/><span class="hl-6"> * </span><span class="hl-3">@param</span><span class="hl-6"> </span><span class="hl-13">argv</span><span class="hl-6"> argumentos de la carta</span><br/><span class="hl-6"> * </span><span class="hl-3">@returns</span><span class="hl-6"> carta</span><br/><span class="hl-6"> */</span><br/><span class="hl-10">export</span><span class="hl-1"> </span><span class="hl-3">function</span><span class="hl-1"> </span><span class="hl-0">CreateCard</span><span class="hl-1">(</span><span class="hl-13">argv</span><span class="hl-1">: </span><span class="hl-11">any</span><span class="hl-1">): </span><span class="hl-11">Carta</span><span class="hl-1">.</span><span class="hl-11">Carta</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-3">const</span><span class="hl-1"> { </span><span class="hl-12">id</span><span class="hl-1">, </span><span class="hl-12">name</span><span class="hl-1">, </span><span class="hl-12">manacost</span><span class="hl-1">, </span><span class="hl-12">color</span><span class="hl-1">, </span><span class="hl-12">timeline</span><span class="hl-1">, </span><span class="hl-12">rarity</span><span class="hl-1">, </span><span class="hl-12">rules</span><span class="hl-1">, </span><span class="hl-12">strength</span><span class="hl-1">, </span><span class="hl-12">loyalty</span><span class="hl-1">, </span><span class="hl-12">value</span><span class="hl-1">} = </span><span class="hl-13">argv</span><br/><span class="hl-1">  </span><span class="hl-3">const</span><span class="hl-1"> </span><span class="hl-12">cardcolor</span><span class="hl-1"> = </span><span class="hl-0">GetColorValue</span><span class="hl-1">(</span><span class="hl-13">color</span><span class="hl-1">);</span><br/><span class="hl-1">  </span><span class="hl-3">const</span><span class="hl-1"> </span><span class="hl-12">cardTimeline</span><span class="hl-1"> = </span><span class="hl-0">GetTimeLineValue</span><span class="hl-1">(</span><span class="hl-13">timeline</span><span class="hl-1">);</span><br/><span class="hl-1">  </span><span class="hl-3">const</span><span class="hl-1"> </span><span class="hl-12">cardRarity</span><span class="hl-1"> = </span><span class="hl-0">GetRarityValue</span><span class="hl-1">(</span><span class="hl-13">rarity</span><span class="hl-1">);</span><br/><br/><span class="hl-1">  </span><span class="hl-10">if</span><span class="hl-1"> (</span><span class="hl-13">cardTimeline</span><span class="hl-1"> == </span><span class="hl-9">6</span><span class="hl-1">) {</span><br/><span class="hl-1">    </span><span class="hl-3">const</span><span class="hl-1"> </span><span class="hl-12">micarta</span><span class="hl-1">: </span><span class="hl-11">Carta</span><span class="hl-1">.</span><span class="hl-11">Carta</span><span class="hl-1"> = {</span><br/><span class="hl-1">      </span><span class="hl-13">ID:</span><span class="hl-1"> </span><span class="hl-13">id</span><span class="hl-1">,</span><br/><span class="hl-1">      </span><span class="hl-13">Name:</span><span class="hl-1"> </span><span class="hl-13">name</span><span class="hl-1">,</span><br/><span class="hl-1">      </span><span class="hl-13">ManaCost:</span><span class="hl-1"> </span><span class="hl-13">manacost</span><span class="hl-1">,</span><br/><span class="hl-1">      </span><span class="hl-13">Color:</span><span class="hl-1"> </span><span class="hl-13">cardcolor</span><span class="hl-1">,</span><br/><span class="hl-1">      </span><span class="hl-13">TimeLine:</span><span class="hl-1"> </span><span class="hl-13">cardTimeline</span><span class="hl-1">,</span><br/><span class="hl-1">      </span><span class="hl-13">Rarity:</span><span class="hl-1"> </span><span class="hl-13">cardRarity</span><span class="hl-1">,</span><br/><span class="hl-1">      </span><span class="hl-13">Rules:</span><span class="hl-1"> </span><span class="hl-13">rules</span><span class="hl-1">,</span><br/><span class="hl-1">      </span><span class="hl-13">Value:</span><span class="hl-1"> </span><span class="hl-13">value</span><span class="hl-1">,</span><br/><span class="hl-1">      </span><span class="hl-13">Loyalty:</span><span class="hl-1"> </span><span class="hl-13">loyalty</span><span class="hl-1">,</span><br/><span class="hl-1">      </span><span class="hl-13">Strength:</span><span class="hl-1"> </span><span class="hl-3">undefined</span><br/><span class="hl-1">    }</span><br/><span class="hl-1">    </span><span class="hl-10">return</span><span class="hl-1"> </span><span class="hl-13">micarta</span><span class="hl-1">;</span><br/><br/><span class="hl-1">  } </span><span class="hl-10">else</span><span class="hl-1"> </span><span class="hl-10">if</span><span class="hl-1"> (</span><span class="hl-13">cardTimeline</span><span class="hl-1"> == </span><span class="hl-9">1</span><span class="hl-1">) {</span><br/><span class="hl-1">    </span><span class="hl-3">const</span><span class="hl-1"> </span><span class="hl-12">micarta</span><span class="hl-1">: </span><span class="hl-11">Carta</span><span class="hl-1">.</span><span class="hl-11">Carta</span><span class="hl-1"> = {</span><br/><span class="hl-1">      </span><span class="hl-13">ID:</span><span class="hl-1"> </span><span class="hl-13">id</span><span class="hl-1">,</span><br/><span class="hl-1">      </span><span class="hl-13">Name:</span><span class="hl-1"> </span><span class="hl-13">name</span><span class="hl-1">,</span><br/><span class="hl-1">      </span><span class="hl-13">ManaCost:</span><span class="hl-1"> </span><span class="hl-13">manacost</span><span class="hl-1">,</span><br/><span class="hl-1">      </span><span class="hl-13">Color:</span><span class="hl-1"> </span><span class="hl-13">cardcolor</span><span class="hl-1">,</span><br/><span class="hl-1">      </span><span class="hl-13">TimeLine:</span><span class="hl-1"> </span><span class="hl-13">cardTimeline</span><span class="hl-1">,</span><br/><span class="hl-1">      </span><span class="hl-13">Rarity:</span><span class="hl-1"> </span><span class="hl-13">cardRarity</span><span class="hl-1">,</span><br/><span class="hl-1">      </span><span class="hl-13">Rules:</span><span class="hl-1"> </span><span class="hl-13">rules</span><span class="hl-1">,</span><br/><span class="hl-1">      </span><span class="hl-13">Value:</span><span class="hl-1"> </span><span class="hl-13">value</span><span class="hl-1">,</span><br/><span class="hl-1">      </span><span class="hl-13">Strength:</span><span class="hl-1"> </span><span class="hl-13">strength</span><span class="hl-1"> </span><span class="hl-10">as</span><span class="hl-1"> [</span><span class="hl-11">number</span><span class="hl-1">, </span><span class="hl-11">number</span><span class="hl-1">],</span><br/><span class="hl-1">      </span><span class="hl-13">Loyalty:</span><span class="hl-1"> </span><span class="hl-3">undefined</span><br/><span class="hl-1">    }</span><br/><span class="hl-1">    </span><span class="hl-10">return</span><span class="hl-1"> </span><span class="hl-13">micarta</span><span class="hl-1">;</span><br/><span class="hl-1">    </span><br/><span class="hl-1">  } </span><span class="hl-10">else</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-3">const</span><span class="hl-1"> </span><span class="hl-12">micarta</span><span class="hl-1">: </span><span class="hl-11">Carta</span><span class="hl-1">.</span><span class="hl-11">Carta</span><span class="hl-1"> = {</span><br/><span class="hl-1">      </span><span class="hl-13">ID:</span><span class="hl-1"> </span><span class="hl-13">id</span><span class="hl-1">,</span><br/><span class="hl-1">      </span><span class="hl-13">Name:</span><span class="hl-1"> </span><span class="hl-13">name</span><span class="hl-1">,</span><br/><span class="hl-1">      </span><span class="hl-13">ManaCost:</span><span class="hl-1"> </span><span class="hl-13">manacost</span><span class="hl-1">,</span><br/><span class="hl-1">      </span><span class="hl-13">Color:</span><span class="hl-1"> </span><span class="hl-13">cardcolor</span><span class="hl-1">,</span><br/><span class="hl-1">      </span><span class="hl-13">TimeLine:</span><span class="hl-1"> </span><span class="hl-13">cardTimeline</span><span class="hl-1">,</span><br/><span class="hl-1">      </span><span class="hl-13">Rarity:</span><span class="hl-1"> </span><span class="hl-13">cardRarity</span><span class="hl-1">,</span><br/><span class="hl-1">      </span><span class="hl-13">Rules:</span><span class="hl-1"> </span><span class="hl-13">rules</span><span class="hl-1">,</span><br/><span class="hl-1">      </span><span class="hl-13">Value:</span><span class="hl-1"> </span><span class="hl-13">value</span><span class="hl-1">,</span><br/><span class="hl-1">      </span><span class="hl-13">Strength:</span><span class="hl-1"> </span><span class="hl-3">undefined</span><span class="hl-1">,</span><br/><span class="hl-1">      </span><span class="hl-13">Loyalty:</span><span class="hl-1"> </span><span class="hl-3">undefined</span><br/><span class="hl-1">    }</span><br/><span class="hl-1">    </span><span class="hl-10">return</span><span class="hl-1"> </span><span class="hl-13">micarta</span><span class="hl-1">;</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">}</span>
</code><button>Copy</button></pre>
<p>index.ts: Es el punto de entrada de la aplicación. Aquí se utilizan las librerías yargs y chalk para manejar la línea de comandos y dar formato a la salida por consola.</p>
<pre><code class="language-ts"><span class="hl-6">// salida de consola</span><br/><span class="hl-10">import</span><span class="hl-1"> </span><span class="hl-13">chalk</span><span class="hl-1"> </span><span class="hl-10">from</span><span class="hl-1"> </span><span class="hl-2">&#39;chalk&#39;</span><span class="hl-1">;</span><br/><br/><span class="hl-6">// api sincrona de node para leer ficheros</span><br/><span class="hl-10">import</span><span class="hl-1"> </span><span class="hl-13">fs</span><span class="hl-1"> </span><span class="hl-10">from</span><span class="hl-1"> </span><span class="hl-2">&#39;fs&#39;</span><br/><br/><span class="hl-6">// linea de comandos</span><br/><span class="hl-10">import</span><span class="hl-1"> </span><span class="hl-13">yargs</span><span class="hl-1"> </span><span class="hl-10">from</span><span class="hl-1"> </span><span class="hl-2">&#39;yargs&#39;</span><span class="hl-1">;</span><br/><span class="hl-10">import</span><span class="hl-1"> { </span><span class="hl-13">hideBin</span><span class="hl-1"> } </span><span class="hl-10">from</span><span class="hl-1"> </span><span class="hl-2">&#39;yargs/helpers&#39;</span><span class="hl-1">;</span><br/><br/><span class="hl-6">// clases, interfaces, tipos ...</span><br/><span class="hl-10">import</span><span class="hl-1"> </span><span class="hl-3">*</span><span class="hl-1"> </span><span class="hl-10">as</span><span class="hl-1"> </span><span class="hl-13">Carta</span><span class="hl-1"> </span><span class="hl-10">from</span><span class="hl-1"> </span><span class="hl-2">&#39;./card.js&#39;</span><br/><span class="hl-10">import</span><span class="hl-1"> { </span><span class="hl-13">CardManager</span><span class="hl-1"> } </span><span class="hl-10">from</span><span class="hl-1"> </span><span class="hl-2">&#39;./cardmanager.js&#39;</span><span class="hl-1">;</span><br/><span class="hl-10">import</span><span class="hl-1"> </span><span class="hl-3">*</span><span class="hl-1"> </span><span class="hl-10">as</span><span class="hl-1"> </span><span class="hl-13">Functions</span><span class="hl-1"> </span><span class="hl-10">from</span><span class="hl-1"> </span><span class="hl-2">&#39;./functions.js&#39;</span><br/><span class="hl-10">import</span><span class="hl-1"> { </span><span class="hl-13">exit</span><span class="hl-1"> } </span><span class="hl-10">from</span><span class="hl-1"> </span><span class="hl-2">&#39;process&#39;</span><span class="hl-1">;</span><br/><br/><span class="hl-3">const</span><span class="hl-1"> </span><span class="hl-12">log</span><span class="hl-1"> = </span><span class="hl-13">console</span><span class="hl-1">.</span><span class="hl-13">log</span><span class="hl-1">;</span><br/><br/><span class="hl-6">// pedimos los parámetros</span><br/><br/><span class="hl-0">yargs</span><span class="hl-1">(</span><span class="hl-0">hideBin</span><span class="hl-1">(</span><span class="hl-13">process</span><span class="hl-1">.</span><span class="hl-13">argv</span><span class="hl-1">))</span><br/><br/><span class="hl-6">//-------------------------------------------ADD-------------------------------------------</span><br/><br/><span class="hl-1">.</span><span class="hl-0">command</span><span class="hl-1">(</span><span class="hl-2">&#39;add&#39;</span><span class="hl-1">, </span><span class="hl-2">&#39;Añade una carta a la colección del usuario&#39;</span><span class="hl-1">, {</span><br/><span class="hl-1">  </span><span class="hl-13">user:</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-13">description:</span><span class="hl-1"> </span><span class="hl-2">&#39;nombre del usuario al que añadir la carta&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-13">type:</span><span class="hl-1"> </span><span class="hl-2">&#39;string&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-13">demandOption:</span><span class="hl-1"> </span><span class="hl-3">true</span><br/><span class="hl-1">  },</span><br/><br/><span class="hl-1">  </span><span class="hl-13">id:</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-13">description:</span><span class="hl-1"> </span><span class="hl-2">&#39;Identificador de la carta&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-13">type:</span><span class="hl-1"> </span><span class="hl-2">&#39;number&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-13">demandOption:</span><span class="hl-1"> </span><span class="hl-3">true</span><br/><span class="hl-1">  },</span><br/><br/><span class="hl-1">  </span><span class="hl-13">name:</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-13">description:</span><span class="hl-1"> </span><span class="hl-2">&#39;Nombre de la carta magic&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-13">type:</span><span class="hl-1"> </span><span class="hl-2">&#39;string&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-13">demandOption:</span><span class="hl-1"> </span><span class="hl-3">true</span><br/><span class="hl-1">  },</span><br/><br/><span class="hl-1">  </span><span class="hl-13">manacost:</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-13">description:</span><span class="hl-1"> </span><span class="hl-2">&#39;Coste de mana para utilizar la carta&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-13">type:</span><span class="hl-1"> </span><span class="hl-2">&#39;number&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-13">demandOption:</span><span class="hl-1"> </span><span class="hl-3">true</span><br/><span class="hl-1">  },</span><br/><br/><span class="hl-1">  </span><span class="hl-13">color:</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-13">description:</span><span class="hl-1"> </span><span class="hl-2">&#39;Color de la carta&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-13">type:</span><span class="hl-1"> </span><span class="hl-2">&#39;string&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-13">choices:</span><span class="hl-1"> [</span><span class="hl-2">&#39;blanco&#39;</span><span class="hl-1">, </span><span class="hl-2">&#39;azul&#39;</span><span class="hl-1">, </span><span class="hl-2">&#39;negro&#39;</span><span class="hl-1">, </span><span class="hl-2">&#39;rojo&#39;</span><span class="hl-1">, </span><span class="hl-2">&#39;verde&#39;</span><span class="hl-1">, </span><span class="hl-2">&#39;incoloro&#39;</span><span class="hl-1">, </span><span class="hl-2">&#39;multicolor&#39;</span><span class="hl-1">],</span><br/><span class="hl-1">    </span><span class="hl-13">demandOption:</span><span class="hl-1"> </span><span class="hl-3">true</span><br/><span class="hl-1">  },</span><br/><br/><span class="hl-1">  </span><span class="hl-13">timeline:</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-13">description:</span><span class="hl-1"> </span><span class="hl-2">&#39;linea de tiempo de la carta&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-13">type:</span><span class="hl-1"> </span><span class="hl-2">&#39;string&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-13">choices:</span><span class="hl-1"> [</span><span class="hl-2">&#39;tierra&#39;</span><span class="hl-1">, </span><span class="hl-2">&#39;criatura&#39;</span><span class="hl-1">, </span><span class="hl-2">&#39;encantamiento&#39;</span><span class="hl-1">, </span><span class="hl-2">&#39;conjuro&#39;</span><span class="hl-1">, </span><span class="hl-2">&#39;instantaneo&#39;</span><span class="hl-1">, </span><span class="hl-2">&#39;Artefacto&#39;</span><span class="hl-1">, </span><span class="hl-2">&#39;Planeswalker&#39;</span><span class="hl-1">],</span><br/><span class="hl-1">    </span><span class="hl-13">demandOption:</span><span class="hl-1"> </span><span class="hl-3">true</span><br/><span class="hl-1">  },</span><br/><br/><span class="hl-1">  </span><span class="hl-13">rarity:</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-13">description:</span><span class="hl-1"> </span><span class="hl-2">&#39;rareza de la carta&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-13">type:</span><span class="hl-1"> </span><span class="hl-2">&#39;string&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-13">choices:</span><span class="hl-1"> [</span><span class="hl-2">&#39;comun&#39;</span><span class="hl-1">, </span><span class="hl-2">&#39;infrecuente&#39;</span><span class="hl-1">, </span><span class="hl-2">&#39;rara&#39;</span><span class="hl-1">, </span><span class="hl-2">&#39;mitica&#39;</span><span class="hl-1">],</span><br/><span class="hl-1">    </span><span class="hl-13">demandOption:</span><span class="hl-1"> </span><span class="hl-3">true</span><br/><span class="hl-1">  },</span><br/><br/><span class="hl-1">  </span><span class="hl-13">rules:</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-13">description:</span><span class="hl-1"> </span><span class="hl-2">&#39;texto de reglas de la carta&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-13">type:</span><span class="hl-1"> </span><span class="hl-2">&#39;string&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-13">demandOption:</span><span class="hl-1"> </span><span class="hl-3">true</span><br/><span class="hl-1">  },</span><br/><br/><span class="hl-1">  </span><span class="hl-13">strength:</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-13">description:</span><span class="hl-1"> </span><span class="hl-2">&#39;fuerza y resistencia de la carta de tipo criatura. Formato: [fuerza, resistencia]&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-13">type:</span><span class="hl-1"> </span><span class="hl-2">&#39;array&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-13">demandOption:</span><span class="hl-1"> </span><span class="hl-3">false</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-0">coerce</span><span class="hl-13">:</span><span class="hl-1"> (</span><span class="hl-13">arg</span><span class="hl-1">) </span><span class="hl-3">=&gt;</span><span class="hl-1"> </span><span class="hl-13">arg</span><span class="hl-1">.</span><span class="hl-0">map</span><span class="hl-1">(</span><span class="hl-13">Number</span><span class="hl-1">),</span><br/><span class="hl-1">    </span><span class="hl-13">nargs:</span><span class="hl-1"> </span><span class="hl-9">2</span><br/><span class="hl-1">  },</span><br/><br/><span class="hl-1">  </span><span class="hl-13">loyalty:</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-13">description:</span><span class="hl-1"> </span><span class="hl-2">&#39;marcas de lealtad que tiene un Planeswalker&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-13">type:</span><span class="hl-1"> </span><span class="hl-2">&#39;number&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-13">default:</span><span class="hl-1"> </span><span class="hl-3">undefined</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-13">demandOption:</span><span class="hl-1"> </span><span class="hl-3">false</span><br/><span class="hl-1">  },</span><br/><br/><span class="hl-1">  </span><span class="hl-13">value:</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-13">description:</span><span class="hl-1"> </span><span class="hl-2">&#39;valor de mercado de la carta&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-13">type:</span><span class="hl-1"> </span><span class="hl-2">&#39;number&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-13">demandOption:</span><span class="hl-1"> </span><span class="hl-3">true</span><br/><span class="hl-1">  }</span><br/><br/><span class="hl-1">}, (</span><span class="hl-13">argv</span><span class="hl-1">) </span><span class="hl-3">=&gt;</span><span class="hl-1"> {                </span><span class="hl-6">// Elegimos que hacer con los parámetros introducidos</span><br/><br/><span class="hl-1">  </span><span class="hl-10">try</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><br/><span class="hl-1">    </span><span class="hl-6">// leemos las cartas del fichero y creamos el manejador</span><br/><span class="hl-1">    </span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-13">chalk</span><span class="hl-1">.</span><span class="hl-0">green</span><span class="hl-1">(</span><span class="hl-2">&quot;Leyendo cartas del usuario &quot;</span><span class="hl-1"> + </span><span class="hl-13">argv</span><span class="hl-1">.</span><span class="hl-13">user</span><span class="hl-1"> + </span><span class="hl-2">&quot; ...&quot;</span><span class="hl-1">));</span><br/><span class="hl-1">    </span><span class="hl-3">const</span><span class="hl-1"> </span><span class="hl-12">cards</span><span class="hl-1"> = </span><span class="hl-13">Functions</span><span class="hl-1">.</span><span class="hl-0">LoadCards</span><span class="hl-1">(</span><span class="hl-13">argv</span><span class="hl-1">.</span><span class="hl-13">user</span><span class="hl-1">);</span><br/><span class="hl-1">    </span><span class="hl-3">const</span><span class="hl-1"> </span><span class="hl-12">mymanager</span><span class="hl-1"> = </span><span class="hl-3">new</span><span class="hl-1"> </span><span class="hl-0">CardManager</span><span class="hl-1">(</span><span class="hl-13">cards</span><span class="hl-1">);</span><br/><span class="hl-1">    </span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-13">chalk</span><span class="hl-1">.</span><span class="hl-0">green</span><span class="hl-1">(</span><span class="hl-2">&quot;Lectura realizada con éxito ...&quot;</span><span class="hl-1">));</span><br/><br/><span class="hl-1">    </span><span class="hl-6">// Creamos la carta que queremos añadir y la añadimos</span><br/><span class="hl-1">    </span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-13">chalk</span><span class="hl-1">.</span><span class="hl-0">green</span><span class="hl-1">(</span><span class="hl-2">&quot;Añadiendo carta a la colección del usuario &quot;</span><span class="hl-1"> + </span><span class="hl-13">argv</span><span class="hl-1">.</span><span class="hl-13">user</span><span class="hl-1">))</span><br/><span class="hl-1">    </span><span class="hl-3">const</span><span class="hl-1"> </span><span class="hl-12">myCard</span><span class="hl-1">: </span><span class="hl-11">Carta</span><span class="hl-1">.</span><span class="hl-11">Carta</span><span class="hl-1"> = </span><span class="hl-13">Functions</span><span class="hl-1">.</span><span class="hl-0">CreateCard</span><span class="hl-1">(</span><span class="hl-13">argv</span><span class="hl-1">);</span><br/><span class="hl-1">    </span><span class="hl-13">mymanager</span><span class="hl-1">.</span><span class="hl-0">addCard</span><span class="hl-1">(</span><span class="hl-13">myCard</span><span class="hl-1">);</span><br/><span class="hl-1">    </span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-13">chalk</span><span class="hl-1">.</span><span class="hl-0">green</span><span class="hl-1">(</span><span class="hl-2">&quot;Carta añadida con éxito&quot;</span><span class="hl-1">))</span><br/><br/><span class="hl-1">    </span><span class="hl-6">// guardamos las cartas sobreescribiendo el fichero</span><br/><span class="hl-1">    </span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-13">chalk</span><span class="hl-1">.</span><span class="hl-0">green</span><span class="hl-1">(</span><span class="hl-2">&quot;Guardando cartas ...&quot;</span><span class="hl-1">))</span><br/><span class="hl-1">    </span><span class="hl-13">Functions</span><span class="hl-1">.</span><span class="hl-0">SaveCard</span><span class="hl-1">(</span><span class="hl-13">argv</span><span class="hl-1">.</span><span class="hl-13">user</span><span class="hl-1">, </span><span class="hl-13">mymanager</span><span class="hl-1">.</span><span class="hl-0">GetCards</span><span class="hl-1">());</span><br/><span class="hl-1">    </span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-13">chalk</span><span class="hl-1">.</span><span class="hl-0">green</span><span class="hl-1">(</span><span class="hl-2">&quot;Cartas guardadas con éxito ...&quot;</span><span class="hl-1">))</span><br/><span class="hl-1">  </span><br/><span class="hl-1">  } </span><span class="hl-10">catch</span><span class="hl-1"> (</span><span class="hl-13">error</span><span class="hl-1">) {   </span><span class="hl-6">// detección de errores</span><br/><span class="hl-1">    </span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-13">chalk</span><span class="hl-1">.</span><span class="hl-0">red</span><span class="hl-1">(</span><span class="hl-2">&quot;Error al añadir la carta al usuario &quot;</span><span class="hl-1">  + </span><span class="hl-13">argv</span><span class="hl-1">.</span><span class="hl-13">user</span><span class="hl-1"> + </span><span class="hl-2">&quot;:&quot;</span><span class="hl-1">, </span><span class="hl-13">error</span><span class="hl-1"> </span><span class="hl-3">instanceof</span><span class="hl-1"> </span><span class="hl-11">Error</span><span class="hl-1"> ? </span><span class="hl-13">error</span><span class="hl-1">.</span><span class="hl-13">message</span><span class="hl-1"> : </span><span class="hl-13">error</span><span class="hl-1">));</span><br/><span class="hl-1">    </span><span class="hl-13">exit</span><span class="hl-1">;</span><br/><span class="hl-1">  }</span><br/><br/><span class="hl-1">})</span><br/><br/><span class="hl-6">//-------------------------------------------LIST-------------------------------------------</span><br/><br/><span class="hl-1">.</span><span class="hl-0">command</span><span class="hl-1">(</span><span class="hl-2">&#39;list&#39;</span><span class="hl-1">, </span><span class="hl-2">&#39;lista las cartas de un usuario&#39;</span><span class="hl-1">, {</span><br/><span class="hl-1">  </span><span class="hl-13">user:</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-13">description:</span><span class="hl-1"> </span><span class="hl-2">&#39;nombre del usuario que tiene la colección que deseamos listar&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-13">type:</span><span class="hl-1"> </span><span class="hl-2">&#39;string&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-13">demandOption:</span><span class="hl-1"> </span><span class="hl-3">true</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">}, (</span><span class="hl-13">argv</span><span class="hl-1">) </span><span class="hl-3">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><br/><span class="hl-1">  </span><span class="hl-10">try</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><br/><span class="hl-1">    </span><span class="hl-6">// cargo las cartas del fichero y creo el manejador</span><br/><span class="hl-1">    </span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-13">chalk</span><span class="hl-1">.</span><span class="hl-0">green</span><span class="hl-1">(</span><span class="hl-2">&quot;Leyendo cartas del usuario &quot;</span><span class="hl-1"> + </span><span class="hl-13">argv</span><span class="hl-1">.</span><span class="hl-13">user</span><span class="hl-1"> + </span><span class="hl-2">&quot; ...&quot;</span><span class="hl-1">));</span><br/><span class="hl-1">    </span><span class="hl-3">const</span><span class="hl-1"> </span><span class="hl-12">cards</span><span class="hl-1"> = </span><span class="hl-13">Functions</span><span class="hl-1">.</span><span class="hl-0">LoadCards</span><span class="hl-1">(</span><span class="hl-13">argv</span><span class="hl-1">.</span><span class="hl-13">user</span><span class="hl-1">);</span><br/><span class="hl-1">    </span><span class="hl-3">const</span><span class="hl-1"> </span><span class="hl-12">mymanager</span><span class="hl-1"> = </span><span class="hl-3">new</span><span class="hl-1"> </span><span class="hl-0">CardManager</span><span class="hl-1">(</span><span class="hl-13">cards</span><span class="hl-1">);</span><br/><span class="hl-1">    </span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-13">chalk</span><span class="hl-1">.</span><span class="hl-0">green</span><span class="hl-1">(</span><span class="hl-2">&quot;Lectura realizada con éxito ...&quot;</span><span class="hl-1">));</span><br/><br/><span class="hl-1">    </span><span class="hl-6">//listo las cartas por consola</span><br/><span class="hl-1">    </span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-13">chalk</span><span class="hl-1">.</span><span class="hl-0">green</span><span class="hl-1">(</span><span class="hl-2">&quot;Listando las cartas del usuario &quot;</span><span class="hl-1"> + </span><span class="hl-13">argv</span><span class="hl-1">.</span><span class="hl-13">user</span><span class="hl-1"> + </span><span class="hl-2">&quot; ...&quot;</span><span class="hl-1">))</span><br/><span class="hl-1">    </span><span class="hl-13">mymanager</span><span class="hl-1">.</span><span class="hl-0">listCards</span><span class="hl-1">();</span><br/><span class="hl-1">    </span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-13">chalk</span><span class="hl-1">.</span><span class="hl-0">green</span><span class="hl-1">(</span><span class="hl-2">&quot;</span><span class="hl-5">\n</span><span class="hl-2">cartas listadas con éxito ...&quot;</span><span class="hl-1">));</span><br/><br/><span class="hl-1">  } </span><span class="hl-10">catch</span><span class="hl-1"> (</span><span class="hl-13">error</span><span class="hl-1">) { </span><span class="hl-6">// detección de errores</span><br/><br/><span class="hl-1">    </span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-13">chalk</span><span class="hl-1">.</span><span class="hl-0">red</span><span class="hl-1">(</span><span class="hl-2">&#39;</span><span class="hl-5">\n</span><span class="hl-2">Error al listar las cartas del usuario &#39;</span><span class="hl-1"> + </span><span class="hl-13">argv</span><span class="hl-1">.</span><span class="hl-13">user</span><span class="hl-1"> + </span><span class="hl-2">&quot;:&quot;</span><span class="hl-1">, </span><span class="hl-13">error</span><span class="hl-1"> </span><span class="hl-3">instanceof</span><span class="hl-1"> </span><span class="hl-11">Error</span><span class="hl-1"> ? </span><span class="hl-13">error</span><span class="hl-1">.</span><span class="hl-13">message</span><span class="hl-1"> : </span><span class="hl-13">error</span><span class="hl-1">));</span><br/><br/><span class="hl-1">  }</span><br/><br/><span class="hl-1">})</span><br/><br/><span class="hl-6">//-------------------------------------------UPDATE-------------------------------------------</span><br/><br/><span class="hl-1">.</span><span class="hl-0">command</span><span class="hl-1">(</span><span class="hl-2">&#39;update&#39;</span><span class="hl-1">, </span><span class="hl-2">&#39;Actualiza la información de una carta&#39;</span><span class="hl-1">, {</span><br/><span class="hl-1">  </span><span class="hl-13">user:</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-13">desciption:</span><span class="hl-1"> </span><span class="hl-2">&#39;nombre del usuario al que le queremos actualizar una carta&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-13">type:</span><span class="hl-1"> </span><span class="hl-2">&#39;string&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-13">demandOption:</span><span class="hl-1"> </span><span class="hl-3">true</span><br/><span class="hl-1">  },</span><br/><br/><span class="hl-1">  </span><span class="hl-13">id:</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-13">desciption:</span><span class="hl-1"> </span><span class="hl-2">&#39;id de la carta que queremos actualizar&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-13">type:</span><span class="hl-1"> </span><span class="hl-2">&#39;number&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-13">demandOption:</span><span class="hl-1"> </span><span class="hl-3">true</span><br/><span class="hl-1">  },</span><br/><br/><span class="hl-1">  </span><span class="hl-13">name:</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-13">description:</span><span class="hl-1"> </span><span class="hl-2">&#39;Nombre de la carta magic&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-13">type:</span><span class="hl-1"> </span><span class="hl-2">&#39;string&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-13">demandOption:</span><span class="hl-1"> </span><span class="hl-3">false</span><br/><span class="hl-1">  },</span><br/><br/><span class="hl-1">  </span><span class="hl-13">manacost:</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-13">description:</span><span class="hl-1"> </span><span class="hl-2">&#39;Coste de mana para utilizar la carta&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-13">type:</span><span class="hl-1"> </span><span class="hl-2">&#39;number&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-13">demandOption:</span><span class="hl-1"> </span><span class="hl-3">false</span><br/><span class="hl-1">  },</span><br/><br/><span class="hl-1">  </span><span class="hl-13">color:</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-13">description:</span><span class="hl-1"> </span><span class="hl-2">&#39;Color de la carta&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-13">type:</span><span class="hl-1"> </span><span class="hl-2">&#39;string&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-13">choices:</span><span class="hl-1"> [</span><span class="hl-2">&#39;blanco&#39;</span><span class="hl-1">, </span><span class="hl-2">&#39;azul&#39;</span><span class="hl-1">, </span><span class="hl-2">&#39;negro&#39;</span><span class="hl-1">, </span><span class="hl-2">&#39;rojo&#39;</span><span class="hl-1">, </span><span class="hl-2">&#39;verde&#39;</span><span class="hl-1">, </span><span class="hl-2">&#39;incoloro&#39;</span><span class="hl-1">, </span><span class="hl-2">&#39;multicolor&#39;</span><span class="hl-1">],</span><br/><span class="hl-1">    </span><span class="hl-13">demandOption:</span><span class="hl-1"> </span><span class="hl-3">false</span><br/><span class="hl-1">  },</span><br/><br/><span class="hl-1">  </span><span class="hl-13">timeline:</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-13">description:</span><span class="hl-1"> </span><span class="hl-2">&#39;linea de tiempo de la carta&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-13">type:</span><span class="hl-1"> </span><span class="hl-2">&#39;string&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-13">choices:</span><span class="hl-1"> [</span><span class="hl-2">&#39;tierra&#39;</span><span class="hl-1">, </span><span class="hl-2">&#39;criatura&#39;</span><span class="hl-1">, </span><span class="hl-2">&#39;encantamiento&#39;</span><span class="hl-1">, </span><span class="hl-2">&#39;conjuro&#39;</span><span class="hl-1">, </span><span class="hl-2">&#39;instantaneo&#39;</span><span class="hl-1">, </span><span class="hl-2">&#39;Artefacto&#39;</span><span class="hl-1">, </span><span class="hl-2">&#39;Planeswalker&#39;</span><span class="hl-1">],</span><br/><span class="hl-1">    </span><span class="hl-13">demandOption:</span><span class="hl-1"> </span><span class="hl-3">false</span><br/><span class="hl-1">  },</span><br/><br/><span class="hl-1">  </span><span class="hl-13">rarity:</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-13">description:</span><span class="hl-1"> </span><span class="hl-2">&#39;rareza de la carta&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-13">type:</span><span class="hl-1"> </span><span class="hl-2">&#39;string&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-13">choices:</span><span class="hl-1"> [</span><span class="hl-2">&#39;comun&#39;</span><span class="hl-1">, </span><span class="hl-2">&#39;infrecuente&#39;</span><span class="hl-1">, </span><span class="hl-2">&#39;rara&#39;</span><span class="hl-1">, </span><span class="hl-2">&#39;mitica&#39;</span><span class="hl-1">],</span><br/><span class="hl-1">    </span><span class="hl-13">demandOption:</span><span class="hl-1"> </span><span class="hl-3">false</span><br/><span class="hl-1">  },</span><br/><br/><span class="hl-1">  </span><span class="hl-13">rules:</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-13">description:</span><span class="hl-1"> </span><span class="hl-2">&#39;texto de reglas de la carta&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-13">type:</span><span class="hl-1"> </span><span class="hl-2">&#39;string&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-13">demandOption:</span><span class="hl-1"> </span><span class="hl-3">false</span><br/><span class="hl-1">  },</span><br/><br/><span class="hl-1">  </span><span class="hl-13">strength:</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-13">description:</span><span class="hl-1"> </span><span class="hl-2">&#39;fuerza y resistencia de la carta de tipo criatura. Formato: [fuerza, resistencia]&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-13">type:</span><span class="hl-1"> </span><span class="hl-2">&#39;array&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-13">demandOption:</span><span class="hl-1"> </span><span class="hl-3">false</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-0">coerce</span><span class="hl-13">:</span><span class="hl-1"> (</span><span class="hl-13">arg</span><span class="hl-1">) </span><span class="hl-3">=&gt;</span><span class="hl-1"> </span><span class="hl-13">arg</span><span class="hl-1">.</span><span class="hl-0">map</span><span class="hl-1">(</span><span class="hl-13">Number</span><span class="hl-1">),</span><br/><span class="hl-1">    </span><span class="hl-13">nargs:</span><span class="hl-1"> </span><span class="hl-9">2</span><br/><span class="hl-1">  },</span><br/><br/><span class="hl-1">  </span><span class="hl-13">loyalty:</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-13">description:</span><span class="hl-1"> </span><span class="hl-2">&#39;marcas de lealtad que tiene un Planeswalker&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-13">type:</span><span class="hl-1"> </span><span class="hl-2">&#39;number&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-13">default:</span><span class="hl-1"> </span><span class="hl-3">undefined</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-13">demandOption:</span><span class="hl-1"> </span><span class="hl-3">false</span><br/><span class="hl-1">  },</span><br/><br/><span class="hl-1">  </span><span class="hl-13">value:</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-13">description:</span><span class="hl-1"> </span><span class="hl-2">&#39;valor de mercado de la carta&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-13">type:</span><span class="hl-1"> </span><span class="hl-2">&#39;number&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-13">demandOption:</span><span class="hl-1"> </span><span class="hl-3">false</span><br/><span class="hl-1">  },</span><br/><span class="hl-1">}, (</span><span class="hl-13">argv</span><span class="hl-1">) </span><span class="hl-3">=&gt;</span><span class="hl-1"> {</span><br/><br/><span class="hl-1">  </span><span class="hl-10">try</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><br/><span class="hl-1">    </span><span class="hl-6">// leo las cartas del fichero de usuario y creo el manejador</span><br/><span class="hl-1">    </span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-13">chalk</span><span class="hl-1">.</span><span class="hl-0">green</span><span class="hl-1">(</span><span class="hl-2">&quot;Leyendo cartas del usuario &quot;</span><span class="hl-1"> + </span><span class="hl-13">argv</span><span class="hl-1">.</span><span class="hl-13">user</span><span class="hl-1"> + </span><span class="hl-2">&quot; ...&quot;</span><span class="hl-1">));</span><br/><span class="hl-1">    </span><span class="hl-3">const</span><span class="hl-1"> </span><span class="hl-12">cards</span><span class="hl-1"> = </span><span class="hl-13">Functions</span><span class="hl-1">.</span><span class="hl-0">LoadCards</span><span class="hl-1">(</span><span class="hl-13">argv</span><span class="hl-1">.</span><span class="hl-13">user</span><span class="hl-1">);</span><br/><span class="hl-1">    </span><span class="hl-3">const</span><span class="hl-1"> </span><span class="hl-12">mymanager</span><span class="hl-1"> = </span><span class="hl-3">new</span><span class="hl-1"> </span><span class="hl-0">CardManager</span><span class="hl-1">(</span><span class="hl-13">cards</span><span class="hl-1">);</span><br/><span class="hl-1">    </span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-13">chalk</span><span class="hl-1">.</span><span class="hl-0">green</span><span class="hl-1">(</span><span class="hl-2">&quot;Lectura realizada con éxito ...&quot;</span><span class="hl-1">));</span><br/><br/><span class="hl-1">    </span><span class="hl-6">// actualizo la carta</span><br/><span class="hl-1">    </span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-13">chalk</span><span class="hl-1">.</span><span class="hl-0">green</span><span class="hl-1">(</span><span class="hl-2">&quot;Actualizando la carta con id &quot;</span><span class="hl-1"> + </span><span class="hl-13">argv</span><span class="hl-1">.</span><span class="hl-13">id</span><span class="hl-1"> + </span><span class="hl-2">&quot; del usuario &quot;</span><span class="hl-1"> + </span><span class="hl-13">argv</span><span class="hl-1">.</span><span class="hl-13">user</span><span class="hl-1"> + </span><span class="hl-2">&quot; ...&quot;</span><span class="hl-1">))</span><br/><span class="hl-1">    </span><span class="hl-13">mymanager</span><span class="hl-1">.</span><span class="hl-0">updateCard</span><span class="hl-1">(</span><span class="hl-13">argv</span><span class="hl-1">);</span><br/><span class="hl-1">    </span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-13">chalk</span><span class="hl-1">.</span><span class="hl-0">green</span><span class="hl-1">(</span><span class="hl-2">&quot;Carta actualizada con éxito ...&quot;</span><span class="hl-1">));</span><br/><br/><span class="hl-1">    </span><span class="hl-6">// guardo las cartas en el fichero del usuario</span><br/><span class="hl-1">    </span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-13">chalk</span><span class="hl-1">.</span><span class="hl-0">green</span><span class="hl-1">(</span><span class="hl-2">&quot;Guardando cartas ...&quot;</span><span class="hl-1">));</span><br/><span class="hl-1">    </span><span class="hl-13">Functions</span><span class="hl-1">.</span><span class="hl-0">SaveCard</span><span class="hl-1">(</span><span class="hl-13">argv</span><span class="hl-1">.</span><span class="hl-13">user</span><span class="hl-1">, </span><span class="hl-13">mymanager</span><span class="hl-1">.</span><span class="hl-0">GetCards</span><span class="hl-1">());</span><br/><span class="hl-1">    </span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-13">chalk</span><span class="hl-1">.</span><span class="hl-0">green</span><span class="hl-1">(</span><span class="hl-2">&quot;Cartas guardadas con éxito ...&quot;</span><span class="hl-1">));</span><br/><br/><span class="hl-1">  } </span><span class="hl-10">catch</span><span class="hl-1"> (</span><span class="hl-13">error</span><span class="hl-1">) { </span><span class="hl-6">// detección de errores</span><br/><span class="hl-1">    </span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-13">chalk</span><span class="hl-1">.</span><span class="hl-0">red</span><span class="hl-1">(</span><span class="hl-2">&quot;Error al actualizar la carta al usuario &quot;</span><span class="hl-1">  + </span><span class="hl-13">argv</span><span class="hl-1">.</span><span class="hl-13">user</span><span class="hl-1"> + </span><span class="hl-2">&quot;:&quot;</span><span class="hl-1">, </span><span class="hl-13">error</span><span class="hl-1"> </span><span class="hl-3">instanceof</span><span class="hl-1"> </span><span class="hl-11">Error</span><span class="hl-1"> ? </span><span class="hl-13">error</span><span class="hl-1">.</span><span class="hl-13">message</span><span class="hl-1"> : </span><span class="hl-13">error</span><span class="hl-1">));</span><br/><span class="hl-1">    </span><span class="hl-13">exit</span><span class="hl-1">;</span><br/><span class="hl-1">  }</span><br/><br/><br/><span class="hl-1">})</span><br/><br/><span class="hl-6">//-------------------------------------------READ-------------------------------------------</span><br/><br/><span class="hl-1">.</span><span class="hl-0">command</span><span class="hl-1">(</span><span class="hl-2">&#39;read&#39;</span><span class="hl-1">, </span><span class="hl-2">&#39;Lee una carta de la colección de un usuario&#39;</span><span class="hl-1">, {</span><br/><span class="hl-1">  </span><span class="hl-13">user:</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-13">description:</span><span class="hl-1"> </span><span class="hl-2">&#39;Usuario que posee la carta&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-13">type:</span><span class="hl-1"> </span><span class="hl-2">&#39;string&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-13">demandOption:</span><span class="hl-1"> </span><span class="hl-3">true</span><br/><span class="hl-1">  },</span><br/><span class="hl-1">  </span><span class="hl-13">id:</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-13">description:</span><span class="hl-1"> </span><span class="hl-2">&#39;id de la carta a leer&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-13">type:</span><span class="hl-1"> </span><span class="hl-2">&#39;number&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-13">demandOption:</span><span class="hl-1"> </span><span class="hl-3">true</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">}, (</span><span class="hl-13">argv</span><span class="hl-1">) </span><span class="hl-3">=&gt;</span><span class="hl-1"> {</span><br/><br/><span class="hl-1">    </span><span class="hl-10">try</span><span class="hl-1"> {</span><br/><span class="hl-1">      </span><br/><span class="hl-1">      </span><span class="hl-6">// leo las cartas del fichero del usuario y creo el manejador</span><br/><span class="hl-1">      </span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-13">chalk</span><span class="hl-1">.</span><span class="hl-0">green</span><span class="hl-1">(</span><span class="hl-2">&quot;Leyendo cartas del usuario &quot;</span><span class="hl-1"> + </span><span class="hl-13">argv</span><span class="hl-1">.</span><span class="hl-13">user</span><span class="hl-1"> + </span><span class="hl-2">&quot; ...&quot;</span><span class="hl-1">));</span><br/><span class="hl-1">      </span><span class="hl-3">const</span><span class="hl-1"> </span><span class="hl-12">cards</span><span class="hl-1"> = </span><span class="hl-13">Functions</span><span class="hl-1">.</span><span class="hl-0">LoadCards</span><span class="hl-1">(</span><span class="hl-13">argv</span><span class="hl-1">.</span><span class="hl-13">user</span><span class="hl-1">);</span><br/><span class="hl-1">      </span><span class="hl-3">const</span><span class="hl-1"> </span><span class="hl-12">mymanager</span><span class="hl-1"> = </span><span class="hl-3">new</span><span class="hl-1"> </span><span class="hl-0">CardManager</span><span class="hl-1">(</span><span class="hl-13">cards</span><span class="hl-1">);</span><br/><span class="hl-1">      </span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-13">chalk</span><span class="hl-1">.</span><span class="hl-0">green</span><span class="hl-1">(</span><span class="hl-2">&quot;Lectura realizada con éxito ...&quot;</span><span class="hl-1">));</span><br/><br/><span class="hl-1">      </span><span class="hl-6">// leo la carta que se pide</span><br/><span class="hl-1">      </span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-13">chalk</span><span class="hl-1">.</span><span class="hl-0">green</span><span class="hl-1">(</span><span class="hl-2">&quot;Leyendo la carta con id &quot;</span><span class="hl-1"> + </span><span class="hl-13">argv</span><span class="hl-1">.</span><span class="hl-13">id</span><span class="hl-1"> + </span><span class="hl-2">&quot; del usuario &quot;</span><span class="hl-1"> + </span><span class="hl-13">argv</span><span class="hl-1">.</span><span class="hl-13">user</span><span class="hl-1"> + </span><span class="hl-2">&quot; ...&quot;</span><span class="hl-1">))</span><br/><span class="hl-1">      </span><span class="hl-13">mymanager</span><span class="hl-1">.</span><span class="hl-0">readSpecificCard</span><span class="hl-1">(</span><span class="hl-13">argv</span><span class="hl-1">.</span><span class="hl-13">id</span><span class="hl-1">);</span><br/><span class="hl-1">      </span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-13">chalk</span><span class="hl-1">.</span><span class="hl-0">green</span><span class="hl-1">(</span><span class="hl-2">&quot;</span><span class="hl-5">\n</span><span class="hl-2">Carta leida con éxito ...&quot;</span><span class="hl-1">))</span><br/><br/><span class="hl-1">    } </span><span class="hl-10">catch</span><span class="hl-1"> (</span><span class="hl-13">error</span><span class="hl-1">) { </span><span class="hl-6">// detección de errores</span><br/><span class="hl-1">    </span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-13">chalk</span><span class="hl-1">.</span><span class="hl-0">red</span><span class="hl-1">(</span><span class="hl-2">&quot;Error al leer la carta al usuario &quot;</span><span class="hl-1">  + </span><span class="hl-13">argv</span><span class="hl-1">.</span><span class="hl-13">user</span><span class="hl-1"> + </span><span class="hl-2">&quot;:&quot;</span><span class="hl-1">, </span><span class="hl-13">error</span><span class="hl-1"> </span><span class="hl-3">instanceof</span><span class="hl-1"> </span><span class="hl-11">Error</span><span class="hl-1"> ? </span><span class="hl-13">error</span><span class="hl-1">.</span><span class="hl-13">message</span><span class="hl-1"> : </span><span class="hl-13">error</span><span class="hl-1">));</span><br/><span class="hl-1">    </span><span class="hl-13">exit</span><span class="hl-1">;</span><br/><span class="hl-1">  }</span><br/><br/><span class="hl-1">})</span><br/><br/><span class="hl-6">//-------------------------------------------REMOVE-------------------------------------------</span><br/><br/><span class="hl-1">.</span><span class="hl-0">command</span><span class="hl-1">(</span><span class="hl-2">&#39;remove&#39;</span><span class="hl-1">, </span><span class="hl-2">&#39;Elimina una carta de la colección de un usuario&#39;</span><span class="hl-1">, {</span><br/><span class="hl-1">  </span><span class="hl-13">user:</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-13">description:</span><span class="hl-1"> </span><span class="hl-2">&#39;Usuario que posee la carta a eliminar&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-13">type:</span><span class="hl-1"> </span><span class="hl-2">&#39;string&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-13">demandOption:</span><span class="hl-1"> </span><span class="hl-3">true</span><br/><span class="hl-1">  },</span><br/><span class="hl-1">  </span><span class="hl-13">id:</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-13">description:</span><span class="hl-1"> </span><span class="hl-2">&#39;id de la carta a eliminar&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-13">type:</span><span class="hl-1"> </span><span class="hl-2">&#39;number&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-13">demandOption:</span><span class="hl-1"> </span><span class="hl-3">true</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">}, (</span><span class="hl-13">argv</span><span class="hl-1">) </span><span class="hl-3">=&gt;</span><span class="hl-1"> {</span><br/><br/><span class="hl-1">  </span><span class="hl-10">try</span><span class="hl-1"> {</span><br/><br/><span class="hl-1">    </span><span class="hl-6">// leo las cartas del fichero del usuario y creo el manejador</span><br/><span class="hl-1">    </span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-13">chalk</span><span class="hl-1">.</span><span class="hl-0">green</span><span class="hl-1">(</span><span class="hl-2">&quot;Leyendo cartas del usuario &quot;</span><span class="hl-1"> + </span><span class="hl-13">argv</span><span class="hl-1">.</span><span class="hl-13">user</span><span class="hl-1"> + </span><span class="hl-2">&quot; ...&quot;</span><span class="hl-1">));</span><br/><span class="hl-1">    </span><span class="hl-3">const</span><span class="hl-1"> </span><span class="hl-12">cards</span><span class="hl-1"> = </span><span class="hl-13">Functions</span><span class="hl-1">.</span><span class="hl-0">LoadCards</span><span class="hl-1">(</span><span class="hl-13">argv</span><span class="hl-1">.</span><span class="hl-13">user</span><span class="hl-1">);</span><br/><span class="hl-1">    </span><span class="hl-3">const</span><span class="hl-1"> </span><span class="hl-12">mymanager</span><span class="hl-1"> = </span><span class="hl-3">new</span><span class="hl-1"> </span><span class="hl-0">CardManager</span><span class="hl-1">(</span><span class="hl-13">cards</span><span class="hl-1">);</span><br/><span class="hl-1">    </span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-13">chalk</span><span class="hl-1">.</span><span class="hl-0">green</span><span class="hl-1">(</span><span class="hl-2">&quot;Lectura realizada con éxito ...&quot;</span><span class="hl-1">));</span><br/><br/><span class="hl-1">    </span><span class="hl-6">// elimino la carta que se pide </span><br/><span class="hl-1">    </span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-13">chalk</span><span class="hl-1">.</span><span class="hl-0">green</span><span class="hl-1">(</span><span class="hl-2">&quot;Eliminando carta con id &quot;</span><span class="hl-1"> + </span><span class="hl-13">argv</span><span class="hl-1">.</span><span class="hl-13">id</span><span class="hl-1"> + </span><span class="hl-2">&quot; ...&quot;</span><span class="hl-1">))</span><br/><span class="hl-1">    </span><span class="hl-13">mymanager</span><span class="hl-1">.</span><span class="hl-0">removeCard</span><span class="hl-1">(</span><span class="hl-13">argv</span><span class="hl-1">.</span><span class="hl-13">id</span><span class="hl-1">);</span><br/><span class="hl-1">    </span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-13">chalk</span><span class="hl-1">.</span><span class="hl-0">green</span><span class="hl-1">(</span><span class="hl-2">&quot;</span><span class="hl-5">\n</span><span class="hl-2">Carta eliminada con éxito ...&quot;</span><span class="hl-1">));</span><br/><br/><span class="hl-1">    </span><span class="hl-6">// sobreescribo los datos en el fichero</span><br/><span class="hl-1">    </span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-13">chalk</span><span class="hl-1">.</span><span class="hl-0">green</span><span class="hl-1">(</span><span class="hl-2">&quot;Guardando cartas ...&quot;</span><span class="hl-1">))</span><br/><span class="hl-1">    </span><span class="hl-13">Functions</span><span class="hl-1">.</span><span class="hl-0">SaveCard</span><span class="hl-1">(</span><span class="hl-13">argv</span><span class="hl-1">.</span><span class="hl-13">user</span><span class="hl-1">, </span><span class="hl-13">mymanager</span><span class="hl-1">.</span><span class="hl-0">GetCards</span><span class="hl-1">());</span><br/><span class="hl-1">    </span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-13">chalk</span><span class="hl-1">.</span><span class="hl-0">green</span><span class="hl-1">(</span><span class="hl-2">&quot;Cartas guardadas con éxito ...&quot;</span><span class="hl-1">))</span><br/><br/><br/><span class="hl-1">  } </span><span class="hl-10">catch</span><span class="hl-1"> (</span><span class="hl-13">error</span><span class="hl-1">) { </span><span class="hl-6">// detección de errores</span><br/><span class="hl-1">    </span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-13">chalk</span><span class="hl-1">.</span><span class="hl-0">red</span><span class="hl-1">(</span><span class="hl-2">&quot;Error al eliminar la carta al usuario &quot;</span><span class="hl-1">  + </span><span class="hl-13">argv</span><span class="hl-1">.</span><span class="hl-13">user</span><span class="hl-1"> + </span><span class="hl-2">&quot;:&quot;</span><span class="hl-1">, </span><span class="hl-13">error</span><span class="hl-1"> </span><span class="hl-3">instanceof</span><span class="hl-1"> </span><span class="hl-11">Error</span><span class="hl-1"> ? </span><span class="hl-13">error</span><span class="hl-1">.</span><span class="hl-13">message</span><span class="hl-1"> : </span><span class="hl-13">error</span><span class="hl-1">));</span><br/><span class="hl-1">    </span><span class="hl-13">exit</span><span class="hl-1">;</span><br/><span class="hl-1">  }</span><br/><br/><span class="hl-1">})</span><br/><br/><span class="hl-6">// ayuda al usuario</span><br/><span class="hl-1">.</span><span class="hl-0">help</span><span class="hl-1">()</span><br/><span class="hl-1">.</span><span class="hl-13">argv</span>
</code><button>Copy</button></pre>
<p>Funcionalidades Principales:</p>
<p>El sistema de gestión de cartas Magic implementado ofrece las siguientes funcionalidades principales:</p>
<p><strong>Agregar Carta (add):</strong> Permite agregar una nueva carta a la colección de un usuario especificado. Se solicitan los datos de la carta como nombre, costo de maná, color, rareza, etc., y se añade a la colección.</p>
<p><strong>Listar Cartas (list):</strong> Muestra por consola todas las cartas de un usuario especificado, junto con su información detallada como nombre, costo de maná, color, rareza, etc.</p>
<p><strong>Actualizar Carta (update):</strong> Permite modificar la información de una carta existente en la colección de un usuario. Se pueden actualizar diversos campos como nombre, costo de maná, color, etc.</p>
<p><strong>Leer Carta Específica (read):</strong> Muestra por consola la información detallada de una carta específica de un usuario, identificada por su ID.</p>
<p><strong>Eliminar Carta (remove</strong>): Permite eliminar una carta específica de la colección de un usuario, identificada por su ID.</p>
<a id="md:conclusión" class="tsd-anchor"></a><h1><a href="#md:conclusión">Conclusión</a></h1><p>El sistema de gestión de cartas Magic implementado proporciona una solución completa y eficiente para manejar las colecciones de cartas de los usuarios. El uso de enums y funciones utilitarias facilita la manipulación de los datos relacionados con las cartas. Este sistema puede ser ampliado y mejorado para incluir nuevas funcionalidades según las necesidades del usuario</p>
</div></div><div class="col-sidebar"><div class="page-menu"><div class="tsd-navigation settings"><details class="tsd-index-accordion"><summary class="tsd-accordion-summary"><h3><svg width="20" height="20" viewBox="0 0 24 24" fill="none"><use href="assets/icons.svg#icon-chevronDown"></use></svg>Settings</h3></summary><div class="tsd-accordion-details"><div class="tsd-filter-visibility"><h4 class="uppercase">Member Visibility</h4><form><ul id="tsd-filter-options"><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-protected" name="protected"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Protected</span></label></li><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-private" name="private"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Private</span></label></li><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-inherited" name="inherited" checked/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Inherited</span></label></li><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-external" name="external"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>External</span></label></li></ul></form></div><div class="tsd-theme-toggle"><h4 class="uppercase">Theme</h4><select id="tsd-theme"><option value="os">OS</option><option value="light">Light</option><option value="dark">Dark</option></select></div></div></details></div><details open class="tsd-index-accordion tsd-page-navigation"><summary class="tsd-accordion-summary"><h3><svg width="20" height="20" viewBox="0 0 24 24" fill="none"><use href="assets/icons.svg#icon-chevronDown"></use></svg>On This Page</h3></summary><div class="tsd-accordion-details"><a href="#md:practica-9-aplicación-para-coleccionistas-de-cartas-magic"><span>Practica 9: <wbr/>Aplicación para coleccionistas de cartas <wbr/>Magic</span></a><a href="#md:indice"><span>Indice</span></a><a href="#md:objetivo"><span>Objetivo</span></a><a href="#md:requisitos-previos"><span>Requisitos previos</span></a><ul><li><a href="#md:inicialización-del-repositorio"><span>Inicialización del repositorio</span></a></li><li><a href="#md:paquetes-instalados"><span>Paquetes instalados</span></a></li><li><a href="#md:estructura-de-directorios"><span>Estructura de directorios</span></a></li><li><a href="#md:actions"><span>Actions</span></a></li><li><ul><li><a href="#md:tests"><span>Tests</span></a></li><li><a href="#md:coveralls"><span>Coveralls</span></a></li><li><a href="#md:sonarcloud"><span>Sonarcloud</span></a></li></ul></li></ul><a href="#md:programa-de-cartas-magic"><span>Programa de cartas magic</span></a><a href="#md:conclusión"><span>Conclusión</span></a></div></details></div><div class="site-menu"><nav class="tsd-navigation"><a href="index.html" class="current"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="assets/icons.svg#icon-1"></use></svg><span>guillermo-plaza-practica8</span></a><ul class="tsd-small-nested-navigation" id="tsd-nav-container" data-base="."><li>Loading...</li></ul></nav></div></div></div><div class="tsd-generator"><p>Generated using <a href="https://typedoc.org/" target="_blank">TypeDoc</a></p></div><div class="overlay"></div></body></html>